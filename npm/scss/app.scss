@use "./scss/color.scss";
@use "./scss/darktheme.css";

$nav-color:#ee6e73;

$code-highlight-bg:#f5f4f9;
$code-highlight-border:#FEDBD0;
$code-highlight-text:#84565E;
$text-em-color:#535c68;
$text-link-color:#6200ee;
$text-body-color:#424242;
$chip-fill-color:#FEDBD0;
$chip-text-color:#84565E;
@use "@material/theme" with (
        // 这里定义的属性都可以被tag或class引用，而又可以在不同的主题class中修改，以实现不同的主题
        // nav，button，drawer的主色
        $primary: #9b27b0,
        $on-primary:white,
        // fab
        $secondary: #43A047,
        $on-secondary: white,

        $background: #f7f7f7,

        $surface: white,
        $on-surface:#424242,
    );
    @use "@material/theme/custom-properties";

// $code-highlight-bg:#2c3037 !default;
// $code-highlight-border:#576574;
// $code-highlight-text:#bec0c2;
// $text-em-color:#535c68;
// $text-link-color:#d05ce3;
// $text-body-color:#000000;
// @use "@material/theme" with (
//     // nav，button，drawer的主色
//     $primary: #ab47bc,
//     // fab
//     $secondary: #43A047,
    
//     $background: #252730,
//     $surface: #2c3037,

//     // $background: #181c21,
//     // $surface: #1d2128,

//     // $background: #0d0e12,
//     // $surface: #12151a,
// );

@use "@material/theme/mdc-theme";

@use "@material/button";
@use '@material/button/mdc-button';
@use "@material/icon-button";

@use "@material/top-app-bar";
@use "@material/top-app-bar/mdc-top-app-bar";

@use "@material/fab";
@use "@material/fab/mdc-fab";

@use "@material/card";
// 组件层级，似乎可以动态
@use "@material/elevation";
@use "@material/elevation/mdc-elevation";
@use '@material/chips';
@use '@material/chips/styles';

@use "@material/data-table/data-table";


@use "@material/drawer";
// list更新到v11之后，用新的实现替换了旧版本，但是README尚未更新，原版本class都被加上了deprecated标记
// 使用它就可以正常加载样式了
@use "@material/list";
@use "@material/list/mdc-list";

@use "@material/dialog";

@use "@material/typography";
@use "@material/typography/mdc-typography";

@use "@material/floating-label/mdc-floating-label";
@use "@material/line-ripple/mdc-line-ripple";
@use "@material/notched-outline/mdc-notched-outline";
@use "@material/textfield";

@use "@material/linear-progress";




// 似乎后期所有的core-styles写法都会被取消，取而代之的是@use "@material/button" 这种直接引入所有属性
@include icon-button.core-styles;
@include fab.core-styles;
@include card.core-styles;
@include elevation.core-styles;
@include data-table.core-styles;
@include data-table.theme-baseline;
@include drawer.core-styles;
@include drawer.modal-core-styles;
@include dialog.core-styles;
@include textfield.core-styles;
@include linear-progress.core-styles;

// 通过js给body添加dark class，可以实现对mac-theme的参数更改
// 大部分组件都会正确相应颜色变化，但是list和chip却无效
// 且theme.$property引用的值也没有动态变化
body.dark {
    --mdc-theme-primary: #ab47bc;
    --mdc-theme-on-primary: white;
    --mdc-theme-secondary: #43A047;
    --mdc-theme-background: #252730;
    --mdc-theme-surface: #2c3037;
    // 主题字体色，段落p
    --mdc-theme-on-surface: #ddd;

    // 标题字体色，h
    --mdc-theme-text-primary-on-background:#ddd;
    // 小标题字体色
    --mdc-theme-text-secondary-on-background:#a0a0a0;

    --link-color:#d05ce3;
    --em-color:#a0a0a0;

    --code-highlight-bg: rgba(240, 246, 252, 0.15);
    
} 

body {
    // 消除top app bar左侧的margin
    margin: 0;
    
    // 不知为何，theme的这个属性不能在 @use "@material/theme" 中定义，放在这里作为默认light主题的配色
    --mdc-theme-text-primary-on-background:rgba(0, 0, 0, 0.87);
    --mdc-theme-text-secondary-on-background:rgba(0, 0, 0, 0.54);
    
    --link-color:#6200ee;
    --em-color:#535c68;

    --code-highlight-bg: rgba(27, 31, 35, 0.05);
}

// footer吸附在页面底部

html, body {
  height: 100%;
}

.page-wrap {
  min-height: 100%;
  /* equal to footer height */
  margin-bottom: -80px; 
}

.page-wrap:after {
  content: "";
  display: block;
}

.site-footer, .page-wrap:after {
  height: 80px; 
}

.foot-header {
    // 这里应该是20px，指定为22px可以把copyright向下多挤2px，使其紧贴底部，不留白
    height: 22px; 
    background-color: rgba(51, 51, 51, 0.08);
}

footer {
    background-color: #ee6e73;
    color: white;
}

footer a {
    color: #ffe0b2;
    text-decoration: none;
}

.copyright {
    padding: 15px 15px;
    @include typography.typography(body1);
    // footer总高度100px，指定整个copyright高度60px
    height: 30px;
}



/* 文章题目 */
.essy-title {
    @include typography.typography(headline4);
    font-size: 1.8rem;
    margin-top: 2.0rem;
    text-align: center;
    // 引用 theme中定义的属性，这个属性可以被 修改，以实现不同的theme主题
    @include theme.property(color, text-primary-on-background);
}

/* 文章署名 */
.essy-author {
    @include typography.typography(subtitle1);
    text-align: center;
    margin-top: 0.8rem;
    @include theme.property(color, text-primary-on-background);
}

/* 文章日期 */
.essy-date {
    @include typography.typography(subtitle1);
    text-align: center;
    margin-top: 0.5rem;
    @include theme.property(color, text-primary-on-background);
}

/* 索引题目 */
.index-title {
    @include typography.typography(subtitle1);
    margin: 0;
}

/* 索引署名 */
.index-author {
    @include typography.typography(subtitle1);
    text-align: right;
    margin: 0;
}

/* 索引地点（观剧使用） */
.index-location {
    @include typography.typography(subtitle1);
    text-align: left;
    margin: 0;
}

/* 索引日期 */
.index-date {
    @include typography.typography(subtitle1);
    text-align: right;
    margin: 0;
}

h1 {
    @include typography.typography(headline4);
}

h2 {
    @include typography.typography(headline5);
}

h1, h2, h3, h4, h5, h6 {
    @include theme.property(color, text-primary-on-background);
}



p, li, a {
    // 使用mdc的字体样式
    @include typography.typography(body1);
    // 段落间距
    margin: 0.5rem 0;
    // 行间距
    line-height: 1.8rem;
}

p {
    text-align: justify;
}

// 斜体，一般用于图片说明
em {
    @include theme.property(color, custom-properties.create(--em-color, #535c68));
}

// 加粗强调，一般用于句子
strong {
    // color:$text-link-color;
}

a {
    // 链接加下划线，可能受mdc class的影响，有些地方下划线被取消了
    text-decoration: underline;
    @include theme.property(color, custom-properties.create(--link-color, #6200ee));
}

a:hover {
    text-decoration: none;
}

/* 无序列表 */
ul {
  padding-left: 18pt;
  padding-right: 0;
  margin-top: 0;
  margin-bottom: 0;
  /* 实心圆 */
  list-style-type: disc;
}
  
/* 有序列表 */
ol {
  padding-left: 18pt;
  padding-right: 0;
  margin-top: 0;
  margin-bottom: 0;
  /* 数字 */
  list-style-type: decimal;
}

// 引用段落
blockquote {
    @include typography.typography(body1);
    line-height: 1.8rem;
    margin: 10px 0;
    padding: 0 0 0 1rem;
    border-left: 5px solid #ee6e73;
    // border-right: 5px solid #ee6e73;
    // background: $code-highlight-bg;
    // border-radius: 0.2rem;
}

// 引用段落中的<p>
blockquote p {
    margin: 0;
}

// 代码块
pre code {
    font-size: 1.0rem;
    line-height: 1.2rem;
}

code.hljs {
    // border-radius: 0.3rem;
    padding: 1rem;
}

/* 段落中单词高亮 */
p code, li code {
    @include typography.typography(body1);
    padding-left: 0.2rem;
    padding-right: 0.2rem;
    padding-top: 0.1rem;
    padding-bottom: 0.1rem;
    margin-left: 0.05rem;
    margin-right: 0.05rem;
    border-radius: 0.3rem;
    
    // color:$code-highlight-text;
    // background: $code-highlight-bg;
    @include theme.property(background, custom-properties.create(--code-highlight-bg, rgba(27, 31, 35, 0.05)));
    // border:1px solid $code-highlight-border;
}

p em code {
    padding-left: 0.3rem;
    padding-right: 0.3rem;
    margin-left: 0;
    margin-right: 0;
} 

// 解决Safari的Ripple动画无圆角
.mdc-button, .mdc-button__ripple {
    border-radius: 20px !important;
    -webkit-mask-image: radial-gradient(white, black);
}

.btn-search {
    @include button.ink-color($chip-text-color);
    @include button.container-fill-color($chip-fill-color);
}

.search-result-nav-wraper {
    margin-top: 10px;
}

.btn-search-result-nav {
    @include button.ink-color($chip-text-color);
    margin-left: 1rem;
    margin-right: 1rem;
}

.search-result-index {
    color: $chip-text-color;
}

.search-result-item {
    height: max-content;
}

.search-result-item-title {
    @include typography.typography(subtitle1);
    color: $text-link-color;
    margin: 0;
    text-align: left;
}

.search-result-item-snippet {
    @include typography.typography(body1);
    color: $text-body-color;
    margin: 0;
    text-align: justify;
    height: max-content;
}

p.search-result-item-snippet b {
    color: $chip-text-color;
}



.tags {
    margin-top: 2rem;
}

.about-me-name {
    @include typography.typography(headline4);
    font-size: 1.8rem;
    text-align: center;
    margin-top: 1.0rem;
    margin-bottom: 1.0rem;
}

.common-dialog-container {
    width: 880px;
}

.about-me-description {
    @include typography.typography(body1);
}

.dialog-link-list {
    // 底部边框由Divider填充
    // border-top: 1px solid rgba(128, 128, 128, 0.336);
    // border-left: 1px solid rgba(128, 128, 128, 0.336);
    // border-right: 1px solid rgba(128, 128, 128, 0.336);
    border: 1px solid rgba(0, 0, 0, 0.12);
    border-radius: 3px;
    padding-top: 0;
    padding-bottom: 0;
}

// 使用此class的标签，可以通过id chip_tag_随笔 弹出对应 dialog_随笔 的dialog
.dialog-trigger {}

// 内容最外层的主容器
.main-container {
    // 横向居中
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    height: 100%;
}

// 索引列表
.index-ul {
    // 注意列表第一个卡片到top bar的距离要和正文卡片与之的距离一致
    padding: 12px 0;
    margin: 0;
}

.index-li {
    list-style-type: none;
    margin: 0;
    padding: 0;
}

// 索引链接
.index-a {
    // 去除下划线
    text-decoration: none;
}

// top-app-bar
.mdc-top-app-bar {
    // 使top bar的层级高于drawer
    z-index: 7;
    // 颜色
    @include top-app-bar.fill-color($nav-color);
    // 阴影
    @include elevation.elevation(10, $nav-color, 0);
}

.mdc-drawer {
    // 使drawer的阴影和内容卡片一致，更协调
    @include elevation.elevation(5,theme.$background, 0);
    @include drawer.item-text-ink-color(text-primary-on-background);
    @include drawer.item-icon-ink-color(text-primary-on-background);
    @include drawer.item-activated-text-ink-color(primary);
    @include drawer.item-activated-icon-ink-color(primary);
    // @include theme.property(color, custom-properties.create(--link-color, #6200ee));
}


// fab
.mdc-fab {
    @include elevation.elevation(5, theme.$secondary, 0);
}

.app-fab--absolute {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
}
    
@media(min-width: 1024px) {
    .app-fab--absolute {
        bottom: 1.5rem;
        right: 1.55rem;
    }
}

// card
.media-container {
    max-width: 100%;
    // height: fit-content;
    max-height: 100%;
}

// chips
// 解决Safari的Ripple动画无圆角
.mdc-evolution-chip, .mdc-evolution-chip__ripple {
    border-radius: 20px !important;
    -webkit-mask-image: radial-gradient(white, black);
}

.mdc-evolution-chip {
    @include chips.text-label-color($chip-text-color);
    @include chips.container-color($chip-fill-color);
}

// 解决Safari的fab Ripple动画无圆角
.mdc-fab__ripple {
    border-radius: 50% !important;
    -webkit-mask-image: radial-gradient(white, black);
}

img.clickable:hover {
    cursor: pointer;
}

img, video {
    max-width: 100%;
    height: auto;
    // border-radius: 0.3rem;
}

.video-container {
  position: relative;
  // 这个百分比越小，视频越扁
  padding-bottom: 65%;
  height: 0;
  overflow: hidden;
}
  
.video-container iframe, .video-container object, .video-container embed {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.essy-card {
    padding: 20px;
    margin: 24px 16px;
    // 文章卡片的阴影，z高度，阴影颜色，扩散度
    @include elevation.elevation(0, theme.$surface, 0);
}



.index-card {
    padding: 20px;
    margin: 12px 16px;
    @include elevation.elevation(0, theme.$surface, 0);
}

.circle-avatar {
    border-radius: 50%;
}

.center-horizontal {
    margin: auto;
    text-align: center;
}



// 手机小屏
@media(max-width: 600px) {
    .essy-card {
        padding: 20px;
        margin: 24px 0;
    }

    .index-card {
        padding: 20px;
        margin: 12px 0;
        // 小屏下取消索引卡片阴影
    }

    .essy-card {
        // 小屏下取消文章卡片阴影
    }
    .mdc-top-app-bar {
        // 小屏下减少top bar阴影面积
        @include elevation.elevation(5, $nav-color, 0);
    }

    // 小屏时纯英文段落不两边对齐，因为单词间隔可能很大
    p.no-justify {
        text-align: left;
    }

}

// 平板中屏
@media only screen and (min-width: 601px) and (max-width: 879) {
    // 默认参数
}


// 电脑大屏
@media(min-width: 880px) {
    .main-container {
        width: 880px;
    }
    .essy-card {
        padding: 24px 40px;
    }

    .index-card {
        padding: 20px 40px;
    }

}