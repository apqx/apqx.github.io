{"version":3,"mappings":"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","names":["ShareHttpPaginator","BaseHttpPaginator","data","initShares","wrapperE","createRoot","jsx","LinearShares","props","paginateViewModel","useMemo","options","HttpPaginatorViewModel","state","useSyncExternalStore","useEffect","consoleDebug","onLoadMore","useCallback","onClickHint","jsxs","item","index","IndexItem","LoadingHint","containerRef","useRef","consoleObjDebug","Fragment","initPost","runOnHtmlDone","initContentCard","initCodeHighlight","initPageCheck","initImgJump","initImg","__vitePreload","codeHighlight","consoleError","urlPath","sectionIdentifier","getSectionTypeByPath","SECTION_TYPE_OPERA","SECTION_TYPE_SHARE","imgList","targetUrl","img","hasCopyright","imgUrl","showCopyrightDialog","url","showAlertDialog","event","showSnackbar"],"ignoreList":[],"sources":["../../src/component/base/paginate/ShareHttpPaginator.ts","../../src/component/react/LinearShares.tsx","../../src/page/post.ts"],"sourcesContent":["import type { ApiShare } from \"../../../repository/bean/service/ApiShare\"\nimport { BaseHttpPaginator } from \"./BaseHttpPaginator\"\nimport type { Share } from \"./bean/Share\"\n\nexport class ShareHttpPaginator extends BaseHttpPaginator<ApiShare, Share> {\n    convertToShowData(data: ApiShare): Share {\n        return {\n            title: data.title,\n            titleNoDate: data.titleNoDate == \"true\",\n            date: data.date,\n            actor: data.actor,\n            location: data.location,\n            linkTitle: data.linkTitle,\n            linkUrl: data.linkUrl,\n            linkPwd: data.linkPwd,\n            archive: data.archive == \"true\"\n        }\n    }\n}","import { useCallback, useEffect, useMemo, useRef, useSyncExternalStore } from \"react\";\nimport { ScrollLoader } from \"../../base/ScrollLoader\";\nimport { consoleDebug, consoleObjDebug } from \"../../util/log\";\nimport { LoadingHint } from \"./LoadingHint\";\nimport \"./LinearShares.scss\";\nimport { createRoot } from \"react-dom/client\";\nimport { HttpPaginatorViewModel } from \"../base/paginate/HttpPaginateViewModel\";\nimport { ShareHttpPaginator } from \"../base/paginate/ShareHttpPaginator\";\nimport type { ApiShare } from \"../../repository/bean/service/ApiShare\";\nimport type { Share } from \"../base/paginate/bean/Share\";\nimport type { BasePaginateViewProps } from \"../base/paginate/bean/BasePaginateViewProps\";\n\nexport function initShares() {\n    const wrapperE = document.querySelector(\"#share-list-wrapper\") as HTMLElement\n    if (wrapperE == null) {\n        return\n    }\n\n    const root = createRoot(wrapperE)\n    root.render(<LinearShares tag={\"\"} category={\"share\"} pinnedPosts={[]} loadedPosts={[]} />)\n}\n\nexport function LinearShares(props: BasePaginateViewProps<Share>) {\n    const paginateViewModel = useMemo(() => {\n        const options = {\n            tag: props.tag,\n            category: props.category,\n        }\n        return new HttpPaginatorViewModel<ApiShare, ShareHttpPaginator, Share>(new ShareHttpPaginator(options))\n    }, [])\n    const state = useSyncExternalStore(paginateViewModel.subscribe, () => paginateViewModel.state)\n\n    useEffect(() => {\n        consoleDebug(`LinearShares useEffect, tag: ${props.tag}, category: ${props.category}`)\n        paginateViewModel.load()\n\n        return () => {\n            consoleDebug(\"LinearShares useEffect cleanup\")\n        }\n    }, [])\n\n    const onLoadMore = useCallback(() => {\n        paginateViewModel.loadMore()\n    }, [])\n\n    const onClickHint = useCallback(() => {\n        if (state.posts.length > 0) {\n            paginateViewModel.loadMore(true)\n        } else {\n            paginateViewModel.load(true)\n        }\n    }, [state.posts])\n\n    return (\n        <ul className=\"share-ul\">\n            {state.posts.map((item, index) =>\n                <IndexItem key={item.linkUrl}\n                    title={item.title} titleNoDate={item.titleNoDate} date={item.date} actor={item.actor} location={item.location}\n                    linkTitle={item.linkTitle} linkUrl={item.linkUrl} linkPwd={item.linkPwd} archive={item.archive} />\n            )}\n            <LoadingHint loading={state.loading} loadHint={state.loadingHint} onClickHint={onClickHint} onLoadMore={onLoadMore} />\n        </ul>\n    )\n}\n\ntype IndexItemProps = {\n    title: string,\n    titleNoDate: boolean,\n    date: string,\n    actor: string,\n    location: string,\n    linkTitle: string,\n    linkUrl: string,\n    linkPwd: string,\n    archive: boolean,\n}\n\nfunction IndexItem(props: IndexItemProps) {\n    const containerRef = useRef<HTMLLIElement>(null)\n\n    useEffect(() => {\n        consoleObjDebug(\"ShareItem mounted\", props)\n        consoleDebug(\"archive = \" + props.archive)\n        const rootE = containerRef.current as HTMLElement;\n\n    }, [])\n\n    /*\n    <p><strong class=\"no-shadow\">20250801 ÊµôÊòÜ„ÄäÁÉÇÊüØÂ±±„ÄãÂâßÁÖß</strong></p>\n    <p class=\"no-justify em-color\">\n        Èí±Âçé‰ª™ È≤çÊô®<br/>\n        ÊµôÊ±üËÉúÂà©ÂâßÈô¢<br/>\n        ÈòøÈáå‰∫ëÁõòÔºö<a href=\"https://www.alipan.com/s/2EY3z5DXyxR\" target=\"_blank\">ÁÇπÂáªÈìæÊé•</a><br/>\n        ÊèêÂèñÁ†Å: 09us\n    </p>\n    */\n    return (\n        <li ref={containerRef} className=\"share-li\">\n            {props.titleNoDate ?\n                <p><strong className=\"no-shadow\">{props.title}</strong></p>\n                :\n                <p><strong className=\"no-shadow\">{props.date} {props.title}</strong></p>\n            }\n            <p className=\"no-justify em-color\">\n                {props.actor != \"\" && <>{props.actor}<br /></>}\n                {props.location != \"\" && <>{props.location}<br /></>}\n                {props.linkTitle}: {props.archive == true ? \"Â∑≤ÂΩíÊ°£\" : <a href={props.linkUrl} target=\"_blank\">ÁÇπÂáªÈìæÊé•</a>}<br />\n                ÊèêÂèñÁ†Å: {props.linkPwd}\n            </p>\n        </li>\n    )\n}","import \"./post.scss\"\nimport { consoleDebug, consoleError } from \"../util/log\"\nimport { runOnHtmlDone } from \"../util/tools\"\nimport { initContentCard } from \"../component/contentCard\"\nimport { showAlertDialog } from \"../component/dialog/CommonAlertDialog\"\nimport { showSnackbar } from \"../component/react/Snackbar\"\nimport { getSectionTypeByPath, SECTION_TYPE_OPERA, SECTION_TYPE_SHARE } from \"../base/constant\"\nimport { initShares } from \"../component/react/LinearShares\"\n\nexport function initPost() {\n    runOnHtmlDone(() => {\n        initContentCard(true)\n        initCodeHighlight()\n        initPageCheck()\n        initImgJump()\n        initImg()\n    })\n}\n\nfunction initCodeHighlight() {\n    if (document.querySelector(\"pre code\") == null) return\n    import(\"../component/codeHighlight\").then((codeHighlight) => {\n        codeHighlight.init()\n    }).catch((e) => {\n        consoleError(e)\n    })\n}\n\n/**\n * ÁªôÊâÄÊúâoperaÊñáÁ´†Ê∑ªÂä†opera-pageÁ±ªÔºåÂÆÉ‰ºöÂΩ±Âìç<code>ÁöÑÊ†∑Âºè\n */\nfunction initPageCheck() {\n    const urlPath = window.location.pathname\n    var sectionIdentifier = getSectionTypeByPath(urlPath).identifier\n    consoleDebug(\"Post page section = \" + sectionIdentifier + \", path = \" + urlPath)\n    if (sectionIdentifier === SECTION_TYPE_OPERA.identifier) {\n        consoleDebug(\"Add opera-page to body\")\n        document.body.classList.add(\"opera-page\")\n    } else if (sectionIdentifier === SECTION_TYPE_SHARE.identifier) {\n        consoleDebug(\"Init share page\")\n        initShares()\n    }\n    \n}\n\nfunction initImgJump() {\n    const imgList = document.querySelectorAll(\".clickShowOriginalImg\")\n    let targetUrl = \"\"\n    for (const img of imgList) {\n        // ÁÇπÂáªÂõæÁâáÔºåË∑≥ËΩ¨Âà∞ÂéüÂõæ\n        img.addEventListener(\"click\", () => {\n            const hasCopyright = img.classList.contains(\"operaCopyright\")\n            // ÊâÄÊúâÁöÑÂõæÁâáÔºåÁº©Áï•ÂõæÈÉΩÂä†‰∫Ü _thumb ÂêéÁºÄÔºåÂà†Èô§ÂêéÂç≥‰∏∫ÂéüÂõæ\n            // ÂõæÁâáÂè™Êúâ 2 ÁßçÊ†ºÂºèÔºåjpg Âíå webp\n            // ÂëΩÂêçÁ§∫‰æãÔºöabcd_thumb.jpg abcd_thumb_jpg.webp abcd_thumb_for_lens_jpg.webp\n            // _thumb: Áº©Áï•ÂõæÊ†áËØÜ\n            // _jpg: ÂéüÂõæÂêéÁºÄÂêçÊ†áËØÜÔºåÈªòËÆ§Áº©Áï•ÂõæÂíåÂéüÂõæ‰∏∫Áõ∏ÂêåÊ†ºÂºè„ÄÇËã•Áº©Áï•ÂõæÊòØ webp ÂéüÂõæÊòØ jpg ÈúÄÂä†Ê≠§Ê†áËØÜ\n            // _for_lens: ÈÄèÈïúÂàÜÂå∫Ê†áËØÜÔºåË°®ÊòéÊ≠§Áº©Áï•ÂõæÊòØ‰∏∫ÈÄèÈïúÂàÜÂå∫ÂáÜÂ§áÁöÑ\n            let imgUrl = img.getAttribute(\"src\")!!\n            if (imgUrl.includes(\"_jpg\")) {\n                imgUrl = imgUrl.substring(0, imgUrl.lastIndexOf(\".\")) + \".jpg\"\n            }\n            targetUrl = imgUrl.replace(\"_thumb\", \"\").replace(\"_jpg\", \"\").replace(\"_for_lens\", \"\")\n            consoleDebug(\"Click show original img, copyright = \" + hasCopyright + \", => \" + targetUrl)\n            if (hasCopyright) {\n                showCopyrightDialog(targetUrl);\n            } else {\n                window.open(targetUrl, \"_blank\")\n            }\n        })\n    }\n}\n\nfunction showCopyrightDialog(url: string) {\n    showAlertDialog(\"ÁâàÊùÉÂ£∞Êòé\", \"ÁÇπÂáª‚ÄúË∑≥ËΩ¨‚ÄùÂ∞ÜÊâìÂºÄÊó†Ê∞¥Âç∞ÂéüÂõæÔºåÊ≥®ÊÑèÂõæÁâáÁâàÊùÉÂΩíÂ±û‰ΩúËÄÖÂèäÂâßÂõ¢ÊºîÂëòÊâÄÊúâÔºåÊú™ÁªèÂÖÅËÆ∏‰∏çÂèØ‰ΩúÂïÜ‰∏öÁî®ÈÄîü§´„ÄÇ\",\n        \"ÂèñÊ∂à\", undefined,\n        \"Ë∑≥ËΩ¨\", () => {\n            window.open(url, \"_blank\")\n        })\n}\n\nfunction initImg() {\n    // Âè≥ÈîÆÁÇπÂáªÂõæÁâáÊó∂ÔºåÈòªÊ≠¢ÂºπÂá∫ÈªòËÆ§ÁöÑÂè≥ÈîÆËèúÂçïÔºåËÄåÊòØÂºπÂá∫Ëá™ÂÆö‰πâÊèêÁ§∫\n    document.addEventListener(\"contextmenu\", (event) => {\n        if (event.target instanceof HTMLImageElement) {\n            event.preventDefault();\n            // showAlertDialog(\"ÊèêÁ§∫\", \"ËäÇÁúÅÊï∞ÊçÆÊµÅÈáèÊñá‰∏≠ÊòØÁº©Áï•ÂõæÔºåÁÇπÂáªÂõæÁâáÂèØ‰ª•Ë∑≥ËΩ¨Âà∞ÂéüÂõæ„ÄÇ\", \"OK\", () => { })\n            showSnackbar(\"ËäÇÁúÅÊï∞ÊçÆÊñá‰∏≠ÊòØÁº©Áï•ÂõæÔºåÁÇπÂáªÂõæÁâáÂèØË∑≥ËΩ¨Âà∞ÂéüÂõæ\")\n        }\n    })\n}\n\nfunction inidShareList() {\n    throw new Error(\"Function not implemented.\")\n}\n"],"file":"blog-post.js"}