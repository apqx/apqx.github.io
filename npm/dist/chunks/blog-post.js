const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./blog-codeHighlight.js","../blog-scaffold.js","../assets/blog-scaffold.css"])))=>i.map(i=>d[i]);
import{y as c,u as d,j as i,r,H as u,c as a,L as g,i as h,l as f,e as m,_ as w,a as x,v as k,z as E,A as j,D as y,E as b}from"../blog-scaffold.js";import{i as P}from"./blog-contentCard.js";class S extends c{convertToShowData(t){return{title:t.title,titleNoDate:t.titleNoDate=="true",date:t.date,actor:t.actor,location:t.location,linkTitle:t.linkTitle,linkUrl:t.linkUrl,linkPwd:t.linkPwd,archive:t.archive=="true"}}}function _(){const e=document.querySelector("#share-list-wrapper");if(e==null)return;d.createRoot(e).render(i.jsx(p,{tag:"",category:"share",pinnedPosts:[],loadedPosts:[]}))}function p(e){const t=r.useMemo(()=>{const n={tag:e.tag,category:e.category};return new u(new S(n))},[]),o=r.useSyncExternalStore(t.subscribe,()=>t.state);r.useEffect(()=>{a(`LinearShares useEffect, tag: ${e.tag}, category: ${e.category}`),t.load(!1);const n=new h(()=>{t.loadMore(!1)}),s=()=>{n.onScroll(document.body.clientHeight,window.scrollY,document.body.scrollHeight)};return window.addEventListener("scroll",s),()=>{a("LinearShares useEffect cleanup"),window.removeEventListener("scroll",s)}},[]);const l=r.useCallback(()=>{o.posts.length>0?t.loadMore(!0):t.load(!0)},[o.posts]);return i.jsxs("ul",{className:"share-ul",children:[o.posts.map((n,s)=>i.jsx(v,{title:n.title,titleNoDate:n.titleNoDate,date:n.date,actor:n.actor,location:n.location,linkTitle:n.linkTitle,linkUrl:n.linkUrl,linkPwd:n.linkPwd,archive:n.archive},n.linkUrl)),(o.loading||o.loadingHint!=null)&&i.jsx(g,{loading:o.loading,loadHint:o.loadingHint,onClickHint:l})]})}function v(e){const t=r.useRef(null);return r.useEffect(()=>{f("ShareItem mounted",e),a("archive = "+e.archive),t.current},[]),i.jsxs("li",{ref:t,className:"share-li",children:[e.titleNoDate?i.jsx("p",{children:i.jsx("strong",{className:"no-shadow",children:e.title})}):i.jsx("p",{children:i.jsxs("strong",{className:"no-shadow",children:[e.date," ",e.title]})}),i.jsxs("p",{className:"no-justify em-color",children:[e.actor!=""&&i.jsxs(i.Fragment,{children:[e.actor,i.jsx("br",{})]}),e.location!=""&&i.jsxs(i.Fragment,{children:[e.location,i.jsx("br",{})]}),e.linkTitle,": ",e.archive==!0?"å·²å½’æ¡£":i.jsx("a",{href:e.linkUrl,target:"_blank",children:"ç‚¹å‡»é“¾æ¥"}),i.jsx("br",{}),"æå–ç : ",e.linkPwd]})]})}function A(){m(()=>{P(!0),L(),H(),D(),T()})}function L(){document.querySelector("pre code")!=null&&w(()=>import("./blog-codeHighlight.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(e=>{e.init()}).catch(e=>{x(e)})}function H(){const e=window.location.pathname;var t=k(e).identifier;a("Post page section = "+t+", path = "+e),t===E.identifier?(a("Add opera-page to body"),document.body.classList.add("opera-page")):t===j.identifier&&(a("Init share page"),_())}function D(){const e=document.querySelectorAll(".clickShowOriginalImg");let t="";for(const o of e)o.addEventListener("click",()=>{const l=o.classList.contains("operaCopyright");let n=o.getAttribute("src");n.includes("_jpg")&&(n=n.substring(0,n.lastIndexOf("."))+".jpg"),t=n.replace("_thumb","").replace("_jpg","").replace("_for_lens",""),a("Click show original img, copyright = "+l+", => "+t),l?I(t):window.open(t,"_blank")})}function I(e){b("ç‰ˆæƒå£°æ˜","ç‚¹å‡»â€œè·³è½¬â€å°†æ‰“å¼€æ— æ°´å°åŸå›¾ï¼Œæ³¨æ„å›¾ç‰‡ç‰ˆæƒå½’å±ä½œè€…åŠå‰§å›¢æ¼”å‘˜æ‰€æœ‰ï¼Œæœªç»å…è®¸ä¸å¯ä½œå•†ä¸šç”¨é€”ğŸ¤«ã€‚","å–æ¶ˆ",void 0,"è·³è½¬",()=>{window.open(e,"_blank")})}function T(){document.addEventListener("contextmenu",e=>{e.target instanceof HTMLImageElement&&(e.preventDefault(),y("èŠ‚çœæ•°æ®æ–‡ä¸­æ˜¯ç¼©ç•¥å›¾ï¼Œç‚¹å‡»å›¾ç‰‡å¯è·³è½¬åˆ°åŸå›¾"))})}export{A as initPost};
