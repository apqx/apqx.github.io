const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./blog-codeHighlight.js","../blog-scaffold.js","../assets/blog-scaffold.css"])))=>i.map(i=>d[i]);
import{x as r,u as c,j as n,i as d,l as h,L as u,c as o,E as g,r as s,n as p,e as f,_ as m,a as w,v as x,y as k,z as P,A as j,D as S}from"../blog-scaffold.js";import{i as _}from"./blog-contentCard.js";class E extends r{getPostForShow(e){let i=e;return{title:i.title,titleNoDate:i.titleNoDate=="true",date:i.date,actor:i.actor,location:i.location,linkTitle:i.linkTitle,linkUrl:i.linkUrl,linkPwd:i.linkPwd,archive:i.archive=="true"}}}function b(){const t=document.querySelector("#share-list-wrapper");if(t==null)return;c.createRoot(t).render(n.jsx(v,{tag:"",category:"share",pinnedPosts:[],loadedPosts:[],onMount:()=>{},onUpdate:()=>{}}))}class v extends d{createPresenter(){return new E(this,!1)}componentDidMount(){super.componentDidMount(),this.props.onUpdate!=null&&this.props.onUpdate(),this.initScroll()}initScroll(){const e=new h(()=>{o("Index scroll should load"),this.state.loadHint!=g&&this.loadMore()});window.addEventListener("scroll",()=>{e.onScroll(document.body.clientHeight,window.scrollY,document.body.scrollHeight)})}componentDidUpdate(e,i,l){this.props.onUpdate!=null&&this.props.onUpdate()}render(){return n.jsxs("ul",{className:"share-ul",children:[this.state.posts.map((e,i)=>n.jsx(y,{title:e.title,titleNoDate:e.titleNoDate,date:e.date,actor:e.actor,location:e.location,linkTitle:e.linkTitle,linkUrl:e.linkUrl,linkPwd:e.linkPwd,archive:e.archive,last:i==this.state.posts.length-1},e.linkUrl)),(this.state.loading||this.state.loadHint!=null)&&n.jsx(u,{loading:this.state.loading,loadHint:this.state.loadHint,onClickHint:this.loadMoreByClick})]})}}function y(t){const e=s.useRef(null);return s.useEffect(()=>{p("ShareItem mounted",t),o("archive = "+t.archive),e.current},[]),n.jsxs("li",{ref:e,className:"share-li",children:[t.titleNoDate?n.jsx("p",{children:n.jsx("strong",{className:"no-shadow",children:t.title})}):n.jsx("p",{children:n.jsxs("strong",{className:"no-shadow",children:[t.date," ",t.title]})}),n.jsxs("p",{className:"no-justify em-color",children:[t.actor!=""&&n.jsxs(n.Fragment,{children:[t.actor,n.jsx("br",{})]}),t.location!=""&&n.jsxs(n.Fragment,{children:[t.location,n.jsx("br",{})]}),t.linkTitle,": ",t.archive==!0?"å·²å½’æ¡£":n.jsx("a",{href:t.linkUrl,target:"_blank",children:"ç‚¹å‡»é“¾æ¥"}),n.jsx("br",{}),"æå–ç : ",t.linkPwd]})]})}function C(){f(()=>{_(!0),D(),I(),L(),H()})}function D(){document.querySelector("pre code")!=null&&m(()=>import("./blog-codeHighlight.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>{t.init()}).catch(t=>{w(t)})}function I(){const t=window.location.pathname;var e=x(t).identifier;o("Post page section = "+e+", path = "+t),e===k.identifier?(o("Add opera-page to body"),document.body.classList.add("opera-page")):e===P.identifier&&(o("Init share page"),b())}function L(){const t=document.querySelectorAll(".clickShowOriginalImg");let e="";for(const i of t)i.addEventListener("click",()=>{const l=i.classList.contains("operaCopyright");let a=i.getAttribute("src");a.includes("_jpg")&&(a=a.substring(0,a.lastIndexOf("."))+".jpg"),e=a.replace("_thumb","").replace("_jpg","").replace("_for_lens",""),o("Click show original img, copyright = "+l+", => "+e),l?U(e):window.open(e,"_blank")})}function U(t){S("ç‰ˆæƒå£°æ˜","ç‚¹å‡»â€œè·³è½¬â€å°†æ‰“å¼€æ— æ°´å°åŸå›¾ï¼Œæ³¨æ„å›¾ç‰‡ç‰ˆæƒå½’å±ä½œè€…åŠå‰§å›¢æ¼”å‘˜æ‰€æœ‰ï¼Œæœªç»å…è®¸ä¸å¯ä½œå•†ä¸šç”¨é€”ğŸ¤«ã€‚","å–æ¶ˆ",void 0,"è·³è½¬",()=>{window.open(t,"_blank")})}function H(){document.addEventListener("contextmenu",t=>{t.target instanceof HTMLImageElement&&(t.preventDefault(),j("èŠ‚çœæ•°æ®æ–‡ä¸­æ˜¯ç¼©ç•¥å›¾ï¼Œç‚¹å‡»å›¾ç‰‡å¯è·³è½¬åˆ°åŸå›¾"))})}export{C as initPost};
