const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./blog-codeHighlight.js","../blog-scaffold.js","../assets/blog-scaffold.css"])))=>i.map(i=>d[i]);
import{v as s,q as l,j as n,f as c,L as d,c as o,E as h,r,k as u,d as g,_ as p,a as f,u as m,w,x,y as k,z as P}from"../blog-scaffold.js";import{i as S}from"./blog-contentCard.js";import{S as j}from"./blog-ScrollLoader.js";class E extends s{getPostForShow(e){let i=e;return{title:i.title,titleNoDate:i.titleNoDate=="true",date:i.date,actor:i.actor,location:i.location,linkTitle:i.linkTitle,linkUrl:i.linkUrl,linkPwd:i.linkPwd,archive:i.archive=="true"}}}function y(){const t=document.querySelector("#share-list-wrapper");if(t==null)return;l.createRoot(t).render(n.jsx(_,{tag:"",category:"share",pinnedPosts:[],loadedPosts:[],onMount:()=>{},onUpdate:()=>{}}))}class _ extends c{createPresenter(){return new E(this,!1)}componentDidMount(){super.componentDidMount(),this.props.onUpdate!=null&&this.props.onUpdate(),this.initScroll()}initScroll(){const e=new j(()=>{o("Index scroll should load"),this.state.loadHint!=h&&this.loadMore()});window.addEventListener("scroll",()=>{e.onScroll(document.body.clientHeight,window.scrollY,document.body.scrollHeight)})}componentDidUpdate(e,i,a){this.props.onUpdate!=null&&this.props.onUpdate()}render(){return n.jsxs("ul",{className:"share-ul",children:[this.state.posts.map((e,i)=>n.jsx(b,{title:e.title,titleNoDate:e.titleNoDate,date:e.date,actor:e.actor,location:e.location,linkTitle:e.linkTitle,linkUrl:e.linkUrl,linkPwd:e.linkPwd,archive:e.archive,last:i==this.state.posts.length-1},e.linkUrl)),(this.state.loading||this.state.loadHint!=null)&&n.jsx(d,{loading:this.state.loading,loadHint:this.state.loadHint,onClickHint:this.loadMoreByClick})]})}}function b(t){const e=r.useRef(null);return r.useEffect(()=>{u("ShareItem mounted",t),o("archive = "+t.archive),e.current},[]),n.jsxs("li",{ref:e,className:"share-li",children:[t.titleNoDate?n.jsx("p",{children:n.jsx("strong",{className:"no-shadow",children:t.title})}):n.jsx("p",{children:n.jsxs("strong",{className:"no-shadow",children:[t.date," ",t.title]})}),n.jsxs("p",{className:"no-justify em-color",children:[t.actor!=""&&n.jsxs(n.Fragment,{children:[t.actor,n.jsx("br",{})]}),t.location!=""&&n.jsxs(n.Fragment,{children:[t.location,n.jsx("br",{})]}),t.linkTitle,": ",t.archive==!0?"å·²å½’æ¡£":n.jsx("a",{href:t.linkUrl,target:"_blank",children:"ç‚¹å‡»é“¾æ¥"}),n.jsx("br",{}),"æå–ç : ",t.linkPwd]})]})}function U(){g(()=>{S(!0),v(),D(),I(),H()})}function v(){document.querySelector("pre code")!=null&&p(()=>import("./blog-codeHighlight.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>{t.init()}).catch(t=>{f(t)})}function D(){const t=window.location.pathname;var e=m(t).identifier;o("Post page section = "+e+", path = "+t),e===w.identifier?(o("Add opera-page to body"),document.body.classList.add("opera-page")):e===x.identifier&&(o("Init share page"),y())}function I(){const t=document.querySelectorAll(".clickShowOriginalImg");let e="";for(const i of t)i.addEventListener("click",()=>{const a=i.classList.contains("operaCopyright");e=i.getAttribute("src").replace("_thumb",""),o("Click show original img, copyright = "+a+", => "+e),a?L(e):window.open(e,"_blank")})}function L(t){P("ç‰ˆæƒå£°æ˜","ç‚¹å‡»â€œOKâ€å°†è·³è½¬åˆ°æ— æ°´å°åŸå›¾ï¼Œæ³¨æ„å›¾ç‰‡ç‰ˆæƒå½’å±ä½œè€…åŠå‰§å›¢æ¼”å‘˜æ‰€æœ‰ï¼Œæœªç»å…è®¸ä¸å¯ä½œå•†ä¸šç”¨é€”ğŸ¤«ã€‚","OK",()=>{window.open(t,"_blank")})}function H(){document.addEventListener("contextmenu",t=>{t.target instanceof HTMLImageElement&&(t.preventDefault(),k("èŠ‚çœæ•°æ®æ–‡ä¸­æ˜¯ç¼©ç•¥å›¾ï¼Œç‚¹å‡»å›¾ç‰‡å¯è·³è½¬åˆ°åŸå›¾"))})}export{U as initPost};
