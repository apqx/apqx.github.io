const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./blog-codeHighlight.js","../blog-scaffold.js","../assets/blog-scaffold.css"])))=>i.map(i=>d[i]);
import{y as c,u as d,j as n,r,H as u,c as l,L as g,k as h,e as f,_ as m,a as k,v as x,z as w,A as j,D as E,E as P}from"../blog-scaffold.js";import{i as _}from"./blog-contentCard.js";class b extends c{convertToShowData(t){return{title:t.title,titleNoDate:t.titleNoDate=="true",date:t.date,actor:t.actor,location:t.location,linkTitle:t.linkTitle,linkUrl:t.linkUrl,linkPwd:t.linkPwd,archive:t.archive=="true"}}}function p(){const e=document.querySelector("#share-list-wrapper");if(e==null)return;d.createRoot(e).render(n.jsx(y,{tag:"",category:"share",pinnedPosts:[],loadedPosts:[]}))}function y(e){const t=r.useMemo(()=>{const i={tag:e.tag,category:e.category};return new u(new b(i))},[]),a=r.useSyncExternalStore(t.subscribe,()=>t.state);r.useEffect(()=>(l(`LinearShares useEffect, tag: ${e.tag}, category: ${e.category}`),t.load(),()=>{l("LinearShares useEffect cleanup")}),[]);const s=r.useCallback(()=>{t.loadMore()},[]),o=r.useCallback(()=>{a.posts.length>0?t.loadMore(!0):t.load(!0)},[a.posts]);return n.jsxs("ul",{className:"share-ul",children:[a.posts.map((i,T)=>n.jsx(S,{title:i.title,titleNoDate:i.titleNoDate,date:i.date,actor:i.actor,location:i.location,linkTitle:i.linkTitle,linkUrl:i.linkUrl,linkPwd:i.linkPwd,archive:i.archive},i.linkUrl)),n.jsx(g,{loading:a.loading,loadHint:a.loadingHint,onClickHint:o,onLoadMore:s})]})}function S(e){const t=r.useRef(null);return r.useEffect(()=>{h("ShareItem mounted",e),l("archive = "+e.archive),t.current},[]),n.jsxs("li",{ref:t,className:"share-li",children:[e.titleNoDate?n.jsx("p",{children:n.jsx("strong",{className:"no-shadow",children:e.title})}):n.jsx("p",{children:n.jsxs("strong",{className:"no-shadow",children:[e.date," ",e.title]})}),n.jsxs("p",{className:"no-justify em-color",children:[e.actor!=""&&n.jsxs(n.Fragment,{children:[e.actor,n.jsx("br",{})]}),e.location!=""&&n.jsxs(n.Fragment,{children:[e.location,n.jsx("br",{})]}),e.linkTitle,": ",e.archive==!0?"å·²å½’æ¡£":n.jsx("a",{href:e.linkUrl,target:"_blank",children:"ç‚¹å‡»é“¾æ¥"}),n.jsx("br",{}),"æå–ç : ",e.linkPwd]})]})}function A(){f(()=>{_(!0),v(),D(),C(),L()})}function v(){document.querySelector("pre code")!=null&&m(()=>import("./blog-codeHighlight.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(e=>{e.init()}).catch(e=>{k(e)})}function D(){const e=window.location.pathname;var t=x(e).identifier;l("Post page section = "+t+", path = "+e),t===w.identifier?(l("Add opera-page to body"),document.body.classList.add("opera-page")):t===j.identifier&&(l("Init share page"),p())}function C(){const e=document.querySelectorAll(".clickShowOriginalImg");let t="";for(const a of e)a.addEventListener("click",()=>{const s=a.classList.contains("operaCopyright");let o=a.getAttribute("src");o.includes("_jpg")&&(o=o.substring(0,o.lastIndexOf("."))+".jpg"),t=o.replace("_thumb","").replace("_jpg","").replace("_for_lens",""),l("Click show original img, copyright = "+s+", => "+t),s?I(t):window.open(t,"_blank")})}function I(e){P("ç‰ˆæƒå£°æ˜","ç‚¹å‡»â€œè·³è½¬â€å°†æ‰“å¼€æ— æ°´å°åŸå›¾ï¼Œæ³¨æ„å›¾ç‰‡ç‰ˆæƒå½’å±ä½œè€…åŠå‰§å›¢æ¼”å‘˜æ‰€æœ‰ï¼Œæœªç»å…è®¸ä¸å¯ä½œå•†ä¸šç”¨é€”ğŸ¤«ã€‚","å–æ¶ˆ",void 0,"è·³è½¬",()=>{window.open(e,"_blank")})}function L(){document.addEventListener("contextmenu",e=>{e.target instanceof HTMLImageElement&&(e.preventDefault(),E("èŠ‚çœæ•°æ®æ–‡ä¸­æ˜¯ç¼©ç•¥å›¾ï¼Œç‚¹å‡»å›¾ç‰‡å¯è·³è½¬åˆ°åŸå›¾"))})}export{A as initPost};
