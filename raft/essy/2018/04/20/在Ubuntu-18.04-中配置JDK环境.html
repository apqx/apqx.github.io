<!DOCTYPE html>
<html>

<head>

  <title>在Ubuntu 18.04 中配置JDK环境</title>
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="/css/materialize.css" media="screen,projection" />
  <link type="text/css" rel="stylesheet" href="/css/custom.css" media="screen,projection" />
  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="utf-8" />
  <meta name="theme-color" content="#ee6e73" />
  <link rel="shortcut icon" href="/apqx.ico" />
</head> 

<header>
  <!-- nav-bar -->
  <div class="navbar-fixed">
    <nav>
      <!-- nav-tag -->
      <div class="nav-wrapper container">
        <a href="https://apqx.me" class="brand-logo">APQX</a>
        <a href="#" data-target="nav-mobile" class="sidenav-trigger">
          <i class="material-icons">menu</i>
        </a>
        <ul class="right hide-on-med-and-down clear">
          <li  class="active" >
            <a class="waves-effect waves-effect" href=" /index.html ">随笔</a>
          </li>
          <li >
            <a class="waves-effect waves-effect" href=" /index-share.html ">转载</a>
          </li>
          <li>
            <a class="waves-effect waves-effect modal-trigger" href="#about_me">关于我</a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
  <!-- pop-up-about-me -->
  <div id="about_me" class="modal container">
    <div class="modal-content">
      <center>
        <img height="100px" width="100dx" class="circle responsive-img" src=" /assets/me.jpg " />
      </center>
      <center>
        <h4>APQX</h4>
      </center>
      <p class="flow-text center-align">野生散养攻城狮，努力晋级中</p>
      <div class="collection">
        <a href="https://github.com/apqx" class="collection-item" target="blank">GitHub</a>
        <a href="https://www.facebook.com/apqx.me" class="collection-item" target="blank">Facebook</a>
        <a href="https://weibo.com/u/3288422413" class="collection-item" target="blank">Weibo</a>
        <a href="mailto:changgongapq@gmail.com" class="collection-item" target="blank">changgongapq@gmail.com</a>
      </div>
    </div>
  </div>
  <!-- slide-to-show-nav-tag -->
  <ul id="nav-mobile" class="sidenav clear">
    <li  class="active" >
      <a class="waves-effect waves-red" href=" /index.html ">随笔</a>
    </li>
    <li >
      <a class="waves-effect waves-red" href=" /index-share.html ">转载</a>
    </li>
    <li>
      <a class="waves-effect waves-red modal-trigger" href="#about_me">关于我</a>
    </li>
  </ul>

  <!-- parallax-slid-img -->
  <!-- 索引页面不显示 -->
  
  <div class="parallax-container hide-on-med-and-down">
    <div class="parallax">
      <img src="/assets/ubuntu.jpg">
    </div>
  </div>
  

</header>

<body class="gray">

  
  <!-- content-card -->
  <div class="container">
    <div class="card-panel hoverable">
      <!-- content -->
   
    <p class="title">在Ubuntu 18.04 中配置JDK环境</p>
    <p class="author">APQX</p>
    <p class="date">2018年04月20日</p>
    <p>我经常会产生一些有意思的想法，对很多事情感到好奇，习惯了图形化交互高度成熟的Windows 10，突发奇想的要尝试一下传说中“纯手工”操作的Linux，正好手头刚组了人生的第一个台式机，Ubuntu自然就成了首选操作系统。</p>

<p>作为一个10年的Windows用户，翻遍了Ubuntu的<code class="highlighter-rouge">Settings</code>，也没有发现和<code class="highlighter-rouge">Environment Variables</code>相关的东西，设置界面相比于Windows的控制面板，只能用“简陋”来形容，更不要说<code class="highlighter-rouge">文件管理器</code>了。在这一刻，我也突然明白了，为什么Windows能占领民用桌面操作系统，果然又是“同行的衬托”，相比Linux的高冷，Windows对几乎所有的操作都提供了图形化接口，动动鼠标就能完成的事，对于普通人，谁会想再去面对那个“恐怖”的Terminal呢。</p>

<p>看了几篇文章，在Ubuntu中配置环境变量无非两种方式，直接修改环境变量配置文件<code class="highlighter-rouge">/etc/environment</code>，或者使用<code class="highlighter-rouge">export</code>命令将新的环境变量插入到系统设置中。</p>

<h1 id="安装jdk">安装JDK</h1>

<p>在Oracle网站下载<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk10-downloads-4416644.html">JDK</a>文件</p>

<p>解压JDK到/usr/lib中</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 实际目录和文件名可能不同
sudo tar -xf /home/apqx/Downloads/jdk-10.0.1_linux-x64_bin.tar.gz /usr/lib
</code></pre></div></div>

<h1 id="配置环境变量直接修改environment文件">配置环境变量：直接修改environment文件</h1>

<p>Ubuntu的环境变量配置文件是<code class="highlighter-rouge">/etc/environment</code>，可以直接将JDK目录写到这个文件中，对所有用户生效</p>

<p>打开文件</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo vim /etc/environment
</code></pre></div></div>

<p>里面的内容应该是类似这样的</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games"
</code></pre></div></div>

<p>将JDK目录添加到<code class="highlighter-rouge">PATH</code>中</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>JAVA_HOME="/usr/lib/jdk-10.0.1/"
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/jdk-10.0.1/bin"
</code></pre></div></div>

<p>要注意的是，<code class="highlighter-rouge">/etc/environment</code>中不能使用<code class="highlighter-rouge">$</code>来引用已有环境变量，也不能使用<code class="highlighter-rouge">export</code>命令，即必须填写绝对路径，就像上面那样</p>

<p>加载修改后的文件，使在当前Terminal立即生效，全局生效则需要重新登陆</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source /etc/environment
</code></pre></div></div>

<p>检查是否配置成功</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo $JAVA_HOME
echo $PATH
</code></pre></div></div>

<h1 id="配置环境变量使用export命令">配置环境变量：使用export命令</h1>

<p>在<code class="highlighter-rouge">Terminal</code>中输入</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export JAVA_HOME=/usr/lib/jdk-10.0.1
export PATH=$PATH:$JAVA_HOME/bin
</code></pre></div></div>

<p>即定义了一个<code class="highlighter-rouge">JAVA_HOME</code>环境变量，并将其路径添加到了系统环境变量<code class="highlighter-rouge">PATH</code>的后面，此时执行</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo $PATH
</code></pre></div></div>

<p>就可以看到，已经添加成功了。但是这种方式设置的环境变量只对当前Terminal及其衍生Terminal有效，解决方法就是在用户登陆时自动在根Terminal中执行<code class="highlighter-rouge">export</code>命令，这样在用户登陆后，就是全局生效的。</p>

<p>在Linux中有一个特殊的目录<code class="highlighter-rouge">/etc/profile.d/</code>，此目录下的脚本文件都会在<code class="highlighter-rouge">用户登录</code>时自动被执行，当然Linux的<code class="highlighter-rouge">开机</code>并不等于<code class="highlighter-rouge">用户登陆</code>，所以这种方式和<code class="highlighter-rouge">开机自启</code>还是有一些区别的，单对于设置环境变量来说足够了。</p>

<p>在/etc/profile.d目录下创建用于设置环境变量的脚本文件environment.sh</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo vim /etc/profile.d/environment.sh
</code></pre></div></div>

<p>在创建的脚本文件中设置Java环境变量</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>
<span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jdk-10.0.1
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>/bin
</code></pre></div></div>

<p>执行脚本</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sh /etc/profile.d/environment.sh
</code></pre></div></div>

<p>检查环境变量是否设置成功</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java --version
</code></pre></div></div>

<p>如果看到正确输出，说明设置正确，重新登录即可全局生效。</p>
 
      
  
      <!-- content -->
    </div>
  </div>
  
  
  <!-- float-btn -->
  <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
    <a class="btn-floating btn-large waves-effect waves-light green" href="#">
      <i class="material-icons">arrow_upward</i>
    </a>
  </div>

  <footer class="page-footer ">
  <div class="footer-copyright">
    <div class="container">
      Based on
      <a class="orange-text text-lighten-3" target="blank" href="https://materializecss.com">Materialize</a> and 
      <a class="orange-text text-lighten-3" target="blank" href="https://jekyllrb.com/">Jekyll</a>
    </div>
  </div>
</footer>

  <!--Import jQuery before materialize.js-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src=" /js/materialize.js "></script>
  <script type="text/javascript" src=" /js/init.js "></script>
  <script type="text/javascript" src=" /codeHighLight/highlight.pack.js "></script>
  <link rel="stylesheet" href=" /codeHighLight/styles/darcula.css ">
</body>

</html>