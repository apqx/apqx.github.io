<!DOCTYPE html>
<html>
    <head>
        <title>apqx.me</title>
        <!--Import Google Icon Font-->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
        <!--Import materialize.css-->
        <link type="text/css" rel="stylesheet" href="../../css/materialize.css"  media="screen,projection"/>
        
        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta charset="utf-8"/>
		<meta name="theme-color" content="#ee6e73"/>
		<link rel="shortcut icon" href="../../favicon.ico"/>
    </head>
    <body class="gray">
        <div class="navbar-fixed">
			<nav class="navbar-fixed light-red lighten-1" role="navigation">
				<div class="nav-wrapper container">
					<a id="logo-container" href="http://apqx.me" class="brand-logo">APQX</a>
					<ul id="nav-mobile" class="side-nav">
						<li><a class="waves-effect waves-red" href="../../content/essay/index.html">随笔</a></li>
						<li><a class="waves-effect waves-red" href="../../content/share/index.html">转载</a></li>
                        <li><a class="waves-effect waves-red modal-trigger" href="#about_me">关于我</a></li>
					</ul>
					<a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
				</div>
			</nav>
		</div>
        <div class="row section">
            <div class="col s2 hide-on-med-and-down">                
                    <div class="collection hoverable z-depth-1">
                    <a href="../../content/essay/index.html" class="waves-effect waves-red collection-item active">随笔</a>
                    <a href="../../content/share/index.html" class="waves-effect waves-red collection-item">转载</a>
                    <a href="#about_me" class="waves-effect waves-red collection-item modal-trigger">关于我</a>
                    </div>
            </div>
            <div class="col l2 hide-on-med-and-down"><pre></pre></div>
            <div class="col s12 m12 l6">
            <div class="card-panel hoverable">
            <div class="container">
                

            <!-- Modal Structure -->
            <div id="about_me" class="modal">
                <div class="modal-content">
                    <center><img height="100px" width="100dx" class="circle responsive-img" src="../../assets/me.jpg"/></center>
                    <center><h4>APQX</h4></center>
                    <p class="flow-text center-align">野生散养攻城狮，沉醉于Android开发技术，任重而道远，我也十分乐意分享自己在学习过程中的收获和经验。</p>
                    <div class="collection">
                            <a href="https://github.com/apqx" target="_blank" class="collection-item">GitHub</a>
                            <a href="https://www.facebook.com/me.apqx" target="_blank" class="collection-item">Facebook</a>
                        </div>
                </div>
            </div>
        
<!---------------------------------------------content------------------------------------------------------------------->
                <h4 align="center">写在求职前夕</h4>
                <p class="center flow-text">APQX</p>
                <p class="center">2017年6月5日</p>
                <p class="flow-text">距离正式毕业还有15天，最终还是到了要离开的日子，离开我生活了四年的郑大校园。平心地说，留恋是很少的，更多的是遗憾，在学习了两年机械工程后，我已无法对无休止的绘图、标注、校核提起任何兴趣，与之相对的是，渐渐神往于由代码构成的计算机世界。这份对未知的好奇也是我坚定转向的动力，也是从那时开始，我发现自己不再像大一那样无法理解C的运作，看似玄而又玄的计算机世界原来是如此的井然有序，如此的合理，计算机按照人的指令辅以精妙的算法和数据结构将世间万物抽象成二进制世界的位运算，再如Java的理念，一切都是对象，而对象可以被创建、引用、销毁，甚至可以被当成垃圾回收。</p>
                <p class="flow-text">算来我学习Java和Android加起来也有两年了，但毕竟只能在繁多的机械课程之余泡图书馆，一边应付机械考试，一边开小差，虽辛苦，但收获还不错，作为“副业”的机械学也弄到了四年四次奖学金，以一名之差无缘保研，我虽然努力告诫自己不屑于跟风搞那些“专利”、“论文”来为保研加分，但心里还是有些遗憾。真正的技术提升还是在大四，一来空余时间较多，二来我也跨过了对代码的困惑阶段，《Java编程思想》也不再像第一次读时那样难以理解，对数据结构、网络、数据库的学习也扩大了我的视野，虽然不能像CS专业学生那样关注每一个实现细节，但是其结构和思想绝对有助于我一步步地理解互联网的运作。</p>
                <p class="flow-text">以Java为基，我选择了Android作为技术方向，实为兴趣使然。我在大一的时候获得了第一台Android手机Nexus 5，从那时开始，我渐渐的发现“Android”和“安卓”是如此的不同，不仅仅体现在GCM上，其操作逻辑、UI设计乃至后台机制似乎都与大陆“隔海相峙”，每年的Google I/O上提到的新特性除了无法更改的系统核心，似乎都与大陆无缘，而这恰恰就是中国的安卓手机生态现状，作为初出茅庐的开发者，我无法改变什么，但我绝对会积累点滴经验，一步步提升自己的技术水平，等待着，或者说参与到“Android”和“安卓”的融合进程中。</p>
                <p class="flow-text">我心里十分清楚，作为非CS专业学生，我唯一的竞争力就是学习能力和对Android的兴趣，至少在Android应用层方面，我认为自己有相当的基础，《Android第一行代码》、《Android群英传》、《Android开发艺术探索》、《Effective Java》、《深入理解JVM虚拟机》、《Java编程思想》，我花了很长时间来学习这些书籍，当然以我现在的水平还无法完全理解其中的一些高级技术，也因为时间原因跳过了一些章节，比如《Java编程思想》中的“注解”，对于《深入理解JVM虚拟机》也仅学习了现阶段用到的JVM内存管理部分和类加载器部分。我在尝试证明自己的价值，至少我不认为自己和那些盲目转行的“被培训者”是一路之人。</p>
                <p class="flow-text">说到底，书籍只是介绍技术，能否应用技术才是能力的体现，我到目前为止一共做过三个Android软件，前两个都和智能硬件控制有关，最后是一个第三方微博客户端。</p>
                <h5>1.树莓派</h5>
                <p class="flow-text">我去年利用树莓派3B制作了一台履带式机器人，利用WiFi建立树莓派服务端和Android控制端的数据连接，可以远程控制机器人的机械臂动作，摄像头云台的转向，可以远程拍照并在拍摄完成后立即将照片发送回Android手机，可以获取树莓派拍摄的实时视频并显示在手机上，我在此博客上已经写了5篇文章来讲述基本的制作原理，源代码也已保存到了<a href="https://github.com/apqx/RaspberryPi_Android" target="_blank">GitHub</a>上。</p>
                <p class="flow-text">
                <a href="./%E6%A0%91%E8%8E%93%E6%B4%BE%E9%81%87%E4%B8%8AJava%EF%BC%88%E4%B8%80%EF%BC%89-%E6%80%BB%E8%BF%B0%E7%AF%87.html" target="_blank">树莓派遇上Java(一)-总述篇</a>
                <br/><a href="./%E6%A0%91%E8%8E%93%E6%B4%BE%E9%81%87%E4%B8%8AJava%EF%BC%88%E4%BA%8C%EF%BC%89-%E5%87%86%E5%A4%87%E7%AF%87.html" target="_blank">树莓派遇上Java(二)-准备篇</a>
                <br/><a href="./%E6%A0%91%E8%8E%93%E6%B4%BE%E9%81%87%E4%B8%8AJava%EF%BC%88%E4%B8%89%EF%BC%89-%E9%A9%AC%E8%BE%BE%E7%AF%87.html" target="_blank">树莓派遇上Java(三)-马达篇</a>
                <br/><a href="./%E6%A0%91%E8%8E%93%E6%B4%BE%E9%81%87%E4%B8%8AJava%EF%BC%88%E5%9B%9B%EF%BC%89-%E8%88%B5%E6%9C%BA%E7%AF%87.html" target="_blank">树莓派遇上Java(四)-舵机篇</a>
                <br/><a href="./%E6%A0%91%E8%8E%93%E6%B4%BE%E9%81%87%E4%B8%8AJava%EF%BC%88%E4%BA%94%EF%BC%89-%E6%91%84%E5%83%8F%E5%A4%B4%E7%AF%87.html" target="_blank">树莓派遇上Java(五)-摄像头篇</a></p>
                <div class="row">
                    <div class="col s12 m8">
                        <center><img class="materialboxed responsive-img" src="./assets/RaspberryPiRobot1.jpg"></center>
                    </div>
                    <div class="col s12 m4">
                        <center><img class="materialboxed responsive-img" src="./assets/Android.png"></center>
                    </div>
                </div>
                <p class="flow-text">这款软件实现了预期的控制功能，只是在编写的时候毫无经验，程序结构显得有些杂乱，前段时间闻言Android Things已经支持树莓派3B，看来是时候重构一下了。</p>
                <h5>2.物流机器人控制器</h5>
                <p class="flow-text">这个其实是我的毕业设计，不可思议，机械学的毕业设计居然是Android软件。此软件的实现和树莓派的控制器类似，只是在此基础上添加了一个路径规划的功能，即用户在手机上绘制路径，机器人沿着此路径行驶。主要的问题就是那个绘制路径的View，其它都没什么可说的。代码保存在<a href="https://github.com/apqx/GraduationProject_Controller" target="_blank">GitHub</a>上。</p>
                <center><img class="materialboxed responsive-img" src="./assets/SeekNode.gif"></center>
                <p class="flow-text"></p>
                <h5>3.第三方微博客户端</h5>
                <p class="flow-text">这个应该是我真正做的一个比较完整的软件，由于要从网络加载媒体资源，我第一次遇到了一些之前没想到的问题，代码保存在<a href="https://github.com/apqx/PocketWeibo" target="_blank">GitHub</a>上。</p>
                <div class="row">
                    <div class="col s12 m3">
                        <center><img class="materialboxed responsive-img" src="./assets/pocketWeibo1.png"></center>
                    </div>
                    <div class="col s12 m3">
                        <center><img class="materialboxed responsive-img" src="./assets/pocketWeibo2.png"></center>
                    </div>
                    <div class="col s12 m3">
                        <center><img class="materialboxed responsive-img" src="./assets/pocketWeibo3.png"></center>
                    </div>
                    <div class="col s12 m3">
                        <center><img class="materialboxed responsive-img" src="./assets/pocketWeibo4.png"></center>
                    </div>
                </div>
                <li>OAuth2授权</li>
                <p class="flow-text">微博使用OAuth2方式来授权客户端访问用户信息，简单来说，客户端的WebView访问微博授权网址并提交微博给第三方客户端的授权信息，用户在此网页中输入账号、密码来验证身份，然后微博服务器会返回一个授权码，客户端再使用HttpUrlConnection或其它方式用此授权码换取access_token，一旦换取成功，客户端就可以在没有用户账号和密码的情况下只使用此access_token来访问用户的微博信息。</p>
                <li>HTTP</li>
                <p class="flow-text">常见的超文本传输协议，我还专门补了一下《计算机网络》，虽然没记住多少，但还算是对网络有了一些认识。微博提供的接口都是GET或POST方法，比较简单，我使用HttpUrlConnection和线程池来构建自己的网络访问框架，其实很初级，无非是对外提供接口，将任务放到线程池中执行，执行完成后回调，当然也可以结合Handler实现在UI线程中回调。对于JSON数据的解析，我使用了JSONObject和JSONArray，将获取的微博数据解析为WeiboItemData对象，加载到RecyclerView中显示，同时在本地以JSON的形式保存所有的微博数据，实现离线访问。</p>
                <li>图片异步加载</li>
                <p class="flow-text">图片的异步加载实际上是两个问题，UI线程中更新UI和RecyclerView的子View重用问题。前者很好解决，Handler和AsyncTask等很多方式都可以实现，后者的问题表现为图片错位，即设置的图片和实际显示的图片不一致。其原因就是RecyclerView复用子View，因为图片在子线程中的下载需要时间，当下载完成后，原View很可能已经滚出屏幕，并被当作下一个ItemView进行显示，同一个View，位置却变了，自然会出现图片错位。解决方法就是在onBindViewHolder中为ItemView设置Tag，在图片下载完成后取出ItemView的Tag，判断和建立下载任务时是否一致，不一致即说明ItemView被复用了，就没有必要再为它加载这个图片了。</p>
                <p class="flow-text">在开发的初期，我尝试写了自己的ImageLoader，使用LruCache和DiskLruCache为图片建立两级缓存，封装了异步加载功能。只是后来遇到的图片问题越来越多，比如GIF动图，全部自己解决太费时间，最终还是选择了Fresco，使用方便，功能强大。</p>
                <li>Activity滑动退出</li>
                <p class="flow-text">这个问题的本质是如何控制当前Activity的整个View进行滑动，并在结束滑动时退出Activity。其实思路也很简单，DecorView是整个View树的根节点，它之下有一个竖直方向的LinearLayout，包含TitleView和ContentView，我要做的就是将一个ViewGroup插入到DecorView和LinearLayout之间，用它来监听触控事件，调用父View即DecorView的scrollBy()方法来移动整个DecorView的内容，此内容包括状态栏的背景，当移动到一定的距离或者速度达到一定值的时候就可以使用动画并退出此Activity。注意的是，Window的背景要设为透明色，否则是看不到此Activity之下的Activity的。</p>
                <li>TextView中显示链接和图片</li>
                <p class="flow-text">在此之前我一直不知道TextView中还可以嵌入链接和图片，还一直好奇表情图是怎么显示在微博里的，其实就是将普通的String转换为SpannableString，并在指定的位置显示指定的格式，比如格式为ClickableSpan即链接，ImageSpan即图片，也可以为这些链接或图片定义点击事件。使用时一般配合正则表达式，正确地替换字符串中的指定字符。</p>
                <li>主题切换</li>
                <p class="flow-text">Android官方给出的切换主题的方案是通过setTheme()方法，它可以加载本地已经定义好的Style作为整个Activity的Theme，View的属性随着主题的切换而不同。只是，View的属性值必须已经在Theme中进行了定义，且setTheme()方法必须在Activity加载View之前调用，一般在setContentView()之前。这种方式需要Activity重新创建才能应用新的主题，在大部分情况下，这是可以接受的。</p>
                <p class="flow-text">经过这个项目，我大概了解了一个软件开发的基本过程，遗憾的是，微博在对外提供API方面非常吝啬，“点赞”居然不对外提供，居然不能根据UserId查询此用户发送的微博，一些在我看来很基础的权限居然还要额外申请，申请的条件是软件已经上架并有介绍页面。本来打算做一个全功能的第三方微博客户端，越做越发现只能通过爬虫来获取一些基本数据，好在写此软件的目的已经达到，这些经验才是最重要的，下次选择项目一定要做好前期调查，避免陷入进退两难的境地。</p>
                <p class="flow-text">如前所述，我对自己的优势、劣势和当前技术水平有着清醒的认识：<br/>
                    <strong>劣势：</strong>非CS出身，知识体系相对不完整。<br/>
                    <strong>优势：</strong>在Java和Android应用层有扎实的基础，乐于接受新技术，尤其对于一年一次大更新的Android，能保持较高的开发热情。技术提升潜力很大，我迟早会补齐短板，这只是时间问题。</p>
                
<!---------------------------------------------content------------------------------------------------------------------->
            </div>
            </div>
            </div>
        </div>
<!----------------------------------------------foot--------------------------------------------------------------------->
         <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
            <a class="btn-floating btn-large waves-effect waves-light green" href="#"><i class="material-icons">publish</i></a>
        </div>
        <footer class="page-footer ">
            <div class="container">
                <div class="row">
                    <div class="col l6 s12">
                        <h5 class="white-text">关于本站</h5>
                        <p class="grey-text text-lighten-4">这是我的个人网站，我会在这里记录自己成长的点滴，也会经常在这里分享各种实用的技巧。</p>
                    </div>
                    <div class="col l3 s12">
                    <h5 class="white-text">联系我</h5>
                     <ul>
                         <li><a class="white-text" href="mailto:changgongapq@gmail.com">changgongapq@outlook.com</a></li>
                    </ul>
                    </div>
                </div>
            </div>
            <div class="footer-copyright">
                <div class="container">
                    Based on <a class="orange-text text-lighten-3" href="http://materializecss.com" target="_blank">Materialize</a>
                </div>
            </div>
        </footer>
		<!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="../../js/materialize.js"></script>
        <script src="../../js/init.js"></script>
        <!--Code highlight-->
        <link rel="stylesheet" href="../../codeHighLight/styles/darcula.css">
        <script src="../../codeHighLight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>