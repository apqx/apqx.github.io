---
layout: post
categories: original
title: "ä¸å¿…å¤æ‚ï¼Œé™æ€åšå®¢ä¹Ÿå¯ä»¥åšçŸ­é“¾"
author: ç«‹æ³‰
mention: Jekyll GitHub
date: 2022-05-17 +0800
description: 
cover: https://apqx.oss-cn-hangzhou.aliyuncs.com/blog/original/20220517/short_link_jumping_phone.webp
tags: Code Blog Jekyll GitHub
---

> ä¸ºä»€ä¹ˆéœ€è¦çŸ­é“¾ï¼Ÿ

```sh
https://mudan.me/post/original/2022/05/17/ä¸å¿…å¤æ‚-é™æ€åšå®¢ä¹Ÿå¯ä»¥åšçŸ­é“¾.html
```

è¿™æ˜¯æˆ‘åšå®¢é‡Œä¸€ç¯‡æ–‡ç« çš„å®Œæ•´é“¾æ¥ï¼Œé™¤å»åè®®å’ŒåŸŸåï¼Œåé¢ä¸€é•¿ä¸²åŒ…å«æ–‡ç« ç±»å‹`â€œoriginalâ€`ã€å†™ä½œæ—¶é—´`â€œ20220517â€`å’Œæ–‡ç« æ ‡é¢˜`â€œä¸å¿…å¤æ‚-é™æ€åšå®¢ä¹Ÿå¯ä»¥åšçŸ­é“¾â€`ï¼Œå®ƒä»¬å…±åŒæ„æˆä¸€ä¸ªæŒ‡å‘æ­¤`HTML`æ–‡æ¡£çš„`URL`ï¼Œå¾ˆè¯¦ç»†ä¹Ÿå¾ˆé•¿ã€‚

æˆ‘çš„åšå®¢ç«™ç‚¹æ˜¯ç”¨`Jekyll`ç”Ÿæˆçš„ï¼Œå®ƒåœ¨è½¬æ¢`Markdown`æ–‡ç« åˆ°é™æ€ç½‘é¡µæ—¶æ”¯æŒè®¾å®šè¾“å‡ºçš„`URL`ç»“æ„ï¼Œç¡®å®èƒ½åšåˆ°å¾ˆçŸ­ã€‚åªéœ€ç»™æ¯ä¸ª`Markdown`æ–‡ç« éƒ½æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰[Front Matter](https://jekyllrb.com/docs/front-matter/){: target="_blank" }ï¼Œç„¶åç”¨å®ƒåšè¾“å‡ºæ–‡ä»¶åï¼Œå¯ä»¥å®ç°ç±»ä¼¼`https://mudan.me/lxzlysh.html`çš„çŸ­é“¾ã€‚

```yml
# Jekyllé…ç½®æ–‡ä»¶ _config.yml

# æŒ‡å®šHTMLé¡µé¢çš„è¾“å‡ºç›®å½•æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯æœ€ç»ˆæ–‡ç« çš„URLæ ¼å¼
# https://mudan.me/post/original/2022/05/17/ä¸å¿…å¤æ‚-é™æ€åšå®¢ä¹Ÿå¯ä»¥åšçŸ­é“¾.html
permalink: /post/:categories/:year/:month/:day/:title:output_ext
# å¯ä»¥å¾ˆçŸ­ï¼Œæ¯”å¦‚ https://mudan.me/bfjbyzd.html
permalink: /:custom_front_matter:output_ext
```

ä½†è¿™æ ·çš„çŸ­æ¥ä¸åŒ…å«ä»»ä½•æ–‡ç« ç›¸å…³ä¿¡æ¯ï¼Œåªæœ‰ä¸€ä¸²æ‰‹åŠ¨æŒ‡å®šçš„å­—ç¬¦ï¼Œä¼šä¸ä¼šç¢°æ’æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå¦ä¸€ä¸ªé—®é¢˜æ˜¯`permalink`å®é™…ä¸Šæ˜¯`Jekyll`æ–‡ç« é¡µé¢çš„è¾“å‡ºç›®å½•ã€‚æˆ‘çš„é•¿é“¾æ˜¯æŠŠæ–‡ç« è¾“å‡ºåˆ°`/post/original/2022/05/17/`ç›®å½•ä¸‹ï¼ŒæŒ‰ç±»å‹ã€æ—¥æœŸåˆ†ç±»å­˜å‚¨ï¼Œè€Œä¸Šé¢é‚£ç§çŸ­é“¾æ˜¾ç„¶æŠŠæ‰€æœ‰æ–‡ç« éƒ½è¾“å‡ºåˆ°äº†æ ¹ç›®å½•ï¼Œå †æˆä¸€å›¢ã€‚å¦‚æœç¡¬è¦åšã€ŒçŸ­ç»“æ„ã€ä¹Ÿå¯ä»¥æ˜¯`/p/o/22/5/17/`ï¼Œä½†æ˜¾ç„¶ä¸å¦‚é•¿é“¾æ¸…æ™°ï¼Œè€Œä¸”è¿™å¹¶ä¸æ˜¯é€šå¸¸æ„ä¹‰ä¸Šçš„ã€ŒçŸ­é“¾ã€ã€‚

ç†è§£ä¸ºä»€ä¹ˆé“¾æ¥ä¼šè¿™ä¹ˆé•¿ä¹‹åï¼Œå†å›åˆ°ä¸€å¼€å§‹çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆéœ€è¦çŸ­é“¾ï¼Ÿ

`URL`ï¼Œ`Universal Resource Locator`ï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œæ˜¯ä¸€ä¸ªèƒ½åœ¨èŒ«èŒ«ç½‘ç»œä¸­å‡†ç¡®æŒ‡å‘ä¸€ä¸ªæŒ‡å®šèµ„æºçš„å­—ç¬¦ä¸²ã€‚å½“æŠŠä¸€ç¯‡æ–‡ç« çš„`URL`åˆ†äº«å‡ºå»ï¼Œä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡å®ƒè®¿é—®åˆ°æ–‡ç« é¡µé¢ï¼Œå°±æ˜¯è¿™ä¹ˆâ€œç¥å¥‡â€ï¼Œè€Œæˆ‘åˆ™æ˜¯é‡åˆ°äº†å‡ ä¸ªä¸å¤ªâ€œç¥å¥‡â€çš„é—®é¢˜ã€‚

## é—®é¢˜

> ä¸å‹å¥½çš„ä¸­æ–‡è§£æ

æˆ‘çš„åšæ–‡`URL`åŒ…å«ä¸­æ–‡ï¼ˆæ–‡ç« æ ‡é¢˜ï¼‰ï¼Œè€Œæ‰§è¡Œç½‘é¡µâ€œè·³è½¬â€çš„`HTTP`åè®®å¹¶ä¸å…è®¸`URL`ä¸­å«æœ‰`ASCII`ç è¡¨ä»¥å¤–å­—ç¬¦ï¼Œæ‰€ä»¥æµè§ˆå™¨åœ¨è®¿é—®ä¸­æ–‡`URL`æ—¶ä¼šå…ˆç”¨`URL Encoder`å°†å…¶è½¬æ¢ä¸ºåˆæ³•`ASCII`å­—ç¬¦ï¼Œç„¶åæ‰èƒ½æ‰§è¡Œ`HTTP`è¯·æ±‚ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸­æ–‡`URL`çš„åˆ†äº«ä¼ æ’­å¹¶ä¸éœ€è¦è½¬ç ï¼Œå¯ä»¥ç›´æ¥å‘åœ¨å¾®åšã€æœ‹å‹åœˆçš„å¸–å­é‡Œï¼Œç­‰ç‚¹å‡»çš„æ—¶å€™å†è½¬ç è·³è½¬ã€‚

é—®é¢˜æ˜¯ï¼Œå¾ˆå¤šå¹³å°åœ¨è§£æé“¾æ¥æ—¶ä¼šä»¥é`ASCII`å­—ç¬¦ä½œä¸º`URL`ç»“æŸçš„æ ‡å¿—ï¼Œå®ƒä»¬è§£æå‡ºçš„å¯ç‚¹å‡»é“¾æ¥åªæ˜¯ä¸­æ–‡`URL`çš„å‰ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸å®Œæ•´ï¼Œæ¯”å¦‚å¾®åšï¼š

```sh
# åŸå§‹URL
https://mudan.me/post/original/2022/05/17/ä¸å¿…å¤æ‚-é™æ€åšå®¢ä¹Ÿå¯ä»¥åšçŸ­é“¾.html
# è§£æå‡ºå¯ä»¥ç‚¹å‡»è·³è½¬çš„åªæ˜¯`https://mudan.me/post/original/2022/05/17/`è¿™éƒ¨åˆ†
# è‡ªç„¶ä¸èƒ½è·³è½¬åˆ°æ­£ç¡®é¡µé¢
`https://mudan.me/post/original/2022/05/17/`ä¸å¿…å¤æ‚-é™æ€åšå®¢ä¹Ÿå¯ä»¥åšçŸ­é“¾.html
```

å¦‚æœä½¿ç”¨`URL Encoder`æŠŠä¸­æ–‡éƒ¨åˆ†ç¼–ç åå†åˆ†äº«å€’æ˜¯èƒ½æ­£ç¡®è§£æï¼Œä½†åˆå¤ªé•¿äº†ï¼Œæ¯ä¸€ä¸ªæ±‰å­—éƒ½è¢«ç¼–ç æˆåå‡ ä¸ª`ASCII`å­—ç¬¦ï¼Œå¾ˆå®¹æ˜“è§¦åŠå¸–å­çš„å­—æ•°é™åˆ¶ã€‚

```sh
# åŸå§‹URL
https://mudan.me/post/original/2022/05/17/ä¸å¿…å¤æ‚-é™æ€åšå®¢ä¹Ÿå¯ä»¥åšçŸ­é“¾.html
# ç¼–ç åçš„URLï¼Œæ˜æ˜¾å˜é•¿
https://mudan.me/post/original/2021/06/10/%E4%B8%8D%E5%BF%85%E5%A4%8D%E6
%9D%82-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E4%B9%9F%E5%8F%AF%E4%BB%A5%
E5%81%9A%E7%9F%AD%E9%93%BE.html
```

> `URL`å˜åŒ–éœ€è¦é‡å®šå‘

ä½¿ç”¨çŸ­é“¾çš„å¦ä¸€ä¸ªåŸå› ä¹Ÿä¸åšæ–‡`URL`é‡Œçš„æ–‡ç« æ ‡é¢˜æœ‰å…³ï¼Œæˆ‘æœ‰æ—¶å€™ä¿®è®¢æ–‡ç« å¯èƒ½ä¼šä¿®æ”¹æ ‡é¢˜ï¼Œå¯¼è‡´å…¶`URL`ä¹Ÿéšä¹‹å˜åŒ–ï¼Œä¹‹å‰åˆ†äº«å‡ºå»çš„é“¾æ¥ä¹Ÿä¼šå› æ­¤å¤±æ•ˆã€‚è™½ç„¶`Jekyll`æä¾›çš„é‡å®šå‘æ’ä»¶`jekyll-redirect-from`å¯ä»¥åœ¨åŸä½ç½®ç”Ÿæˆä¸€ä¸ªæŒ‡å‘æ–‡ç« æœ€æ–°åœ°å€çš„`HTML`ç½‘é¡µè¿›è¡Œè·³è½¬ï¼Œä½†æ¯•ç«Ÿä¼šåˆ›å»ºå¤šä½™ç›®å½•å’Œå¤šä½™æ–‡ä»¶ï¼Œä¸å¦‚ç›´æ¥ç»´æŠ¤ä¸€ä¸ªçŸ­é“¾ä¸åŸå§‹é“¾çš„æ˜ å°„è¡¨ç®€å•ç›´è§‚ã€‚æ— è®ºæ–‡ç« `URL`æ€ä¹ˆå˜åŒ–ï¼Œåªéœ€è¦ä¿è¯æ˜ å°„è¡¨é‡Œç”¨äºåˆ†äº«çš„çŸ­é“¾å§‹ç»ˆæŒ‡å‘æœ€æ–°åœ°å€å³å¯ã€‚

```html
<!-- jekyll-redirect-from ç”Ÿæˆçš„é‡å®šå‘ç½‘é¡µ -->
<!DOCTYPE html>
<html lang="en-US">
  <meta charset="utf-8">
  <title>Redirecting&hellip;</title>
  <link rel="canonical" href="http://mudan.me/target.html">
  <script>location="http://mudan.me/target.html"</script>
  <meta http-equiv="refresh" content="0; url=http://mudan.me/target.html">
  <meta name="robots" content="noindex">
  <h1>Redirecting&hellip;</h1>
  <a href="http://mudan.me/target.html">Click here if you are not redirected.</a>
</html>
```

## æ˜ å°„

çŸ­é“¾æœåŠ¡çš„å®ç°æœ¬è´¨å°±æ˜¯æŸ¥è¯¢æ˜ å°„è¡¨ï¼Œä»ä¸­æ‰¾åˆ°çŸ­é“¾å¯¹åº”çš„é•¿é“¾ç„¶åè·³è½¬ï¼Œè¿™è¦æ±‚ä»é•¿é“¾ç”ŸæˆçŸ­é“¾çš„ç®—æ³•å¿…é¡»ä¿è¯çŸ­é“¾çš„å”¯ä¸€æ€§ï¼Œä¸èƒ½å‡ºç°å¤šä¸ªé•¿é“¾ç”ŸæˆåŒä¸€ä¸ªçŸ­é“¾çš„æƒ…å†µã€‚

é¦–å…ˆ`å“ˆå¸Œ`ç®—æ³•æ˜¯ä¸åˆé€‚çš„ï¼Œè™½ç„¶æ¦‚ç‡å¾ˆä½ï¼Œä½†`å“ˆå¸Œç¢°æ’`ä¸å¯é¿å…ã€‚ä¸€ç§æµè¡Œå®ç°æ˜¯`å¤šä½62è¿›åˆ¶è‡ªå¢`ï¼Œæ¯”å¦‚å®šä¹‰çŸ­é“¾ä¸º5ä¸ªå­—ç¬¦ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½æ˜¯62è¿›åˆ¶ï¼Œé‚£ä¹ˆ1ä½å°±å¯ä»¥å¯¹åº”62ä¸ªé•¿é“¾ï¼Œ5ä½å¯¹åº”`62^5=916,132,832`ä¸ªé•¿é“¾ã€‚çŸ­çŸ­5ä½çš„æŒ‡æ•°çº§å¢é•¿å°±å·²ç»æ¥è¿‘10äº¿ï¼Œè¶³å¤Ÿåº”å¯¹å¤§é‡çŸ­é“¾æ˜ å°„ã€‚

ä¸ºä»€ä¹ˆæ˜¯62è¿›åˆ¶ï¼Ÿå› ä¸º`URL`å¿…é¡»æ˜¯`ASCII`ç è¡¨é‡Œçš„å­—ç¬¦ï¼Œå¸¸ç”¨çš„æ•°å­—`[0-9]`å’Œå¤§å°å†™å­—æ¯`[a-z,A-Z]`åŠ èµ·æ¥å°±æ˜¯62ã€‚å½“ç„¶å¦‚æœæŠŠ`+`ã€`-`è¿™ç±»åˆæ³•å­—ç¬¦ä¹Ÿç®—ä¸Šï¼Œ64è¿›åˆ¶ä¹Ÿå¯ä»¥ã€‚

ä¸€ä¸ªç”ŸæˆçŸ­é“¾çš„è‡ªå¢å‡½æ•°ç¤ºä¾‹ï¼š

```kotlin
val table = charArrayOf('0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
    'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',
    'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 
    'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z')
/**
 * æŠŠä¼ å…¥çš„å­—ç¬¦ä¸²æŒ‰[table]æ•°ç»„çš„62ä¸ªå­—ç¬¦é¡ºåºè‡ªå¢ï¼Œæ¯”å¦‚0000Zï¼Œè‡ªå¢åä¸º00010
 */
fun selfIncreaseBase62(baseStr: String): String {
    val sb = StringBuilder()
    // è¿›ä½è®°å½•
    var carry = 1
    for (i in (baseStr.length - 1) downTo  0) {
        var index = table.indexOf(baseStr[i])
        if (index == -1) throw InvalidParameterException("invalid character")
        index += carry
        if (index >= table.size) {
            // è¿›ä½
            carry = 1
            // indexå½’é›¶
            index = 0
        } else {
            // ä¸è¿›ä½
            carry = 0
        }
        sb.insert(0, table[index])
    }
    // è·³å‡ºå¾ªç¯ä¾ç„¶æœ‰è¿›ä½ï¼Œåˆ™å·²ç»è¶…å‡ºäº†æ‰€èƒ½è¡¨ç¤ºçš„èŒƒå›´
    if (carry == 1) {
        throw IndexOutOfBoundsException()
    }
    return sb.toString()
}
```

## éœ€è¦æ•°æ®åº“å—

å·²ç»æœ‰ç”Ÿæˆæ˜ å°„è¡¨çš„æ–¹æ³•ï¼Œè¦å¦‚ä½•å­˜å‚¨è¿™ä¸ªæ˜ å°„è¡¨å¹¶å¿«é€ŸæŸ¥è¯¢å‘¢ï¼Ÿæ•°æ®åº“å½“ç„¶æ˜¯èƒ½æƒ³åˆ°çš„é¦–é€‰æ–¹æ¡ˆï¼Œä½†å¯¹ä¸€ä¸ªæ‰˜ç®¡åœ¨`GitHub Pages`ä¸ŠåŒºåŒºæ•°åç½‘é¡µçš„é™æ€åšå®¢æ¥è¯´ï¼Œæœ‰äº›å¤ªâ€œé‡â€äº†ï¼Œè€Œä¸”è¿˜è¦å•ç‹¬ç§Ÿç”¨æœåŠ¡å™¨ï¼Œå¹¶ä¸åˆé€‚ã€‚

æˆ‘ä¸ä¼šå¯¹å¤–æä¾›çŸ­é“¾æœåŠ¡ï¼Œä»…ä»…ä¸ºåšå®¢é‡Œçš„ä¸€éƒ¨åˆ†æ–‡ç« ç”ŸæˆçŸ­é“¾ï¼Œæ‰€ä»¥æ›´ç°å®çš„æ–¹æ³•æ˜¯åœ¨`archives`ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¿å­˜æ˜ å°„è¡¨çš„[url-map.json]({% link _archives/url-map.txt %}.txt){: target="_blank" }æ–‡ä»¶ï¼Œæ‰‹åŠ¨æ·»åŠ æ˜ å°„ï¼Œæˆ‘ä¼°æ‘¸ç€ä»¥è‡ªå·±çš„æ–‡ç« äº§å‡ºå¤§æ¦‚æ˜¯ä¸ä¼šè¶…è¿‡ç™¾æ¡çš„ğŸ™„ï¸ã€‚

```json
// archives/url-map.json

// çŸ­é“¾æˆ‘åªç”¨2ä½36è¿›åˆ¶å°±è¶³å¤Ÿï¼Œ36^2=1296ï¼Œåƒæ¡å®¹é‡ï¼Œå¦‚æœæœ‰å¹¸çœŸçš„ä¸å¤Ÿï¼ŒåæœŸè¿˜å¯ä»¥æ‰©å……
// è¿™é‡Œçš„opã€ogã€rpæ˜¯æˆ‘çš„æ–‡ç« åˆ†ç±»æ ‡å¿—
// æœ€ç»ˆçš„çŸ­é“¾æ ¼å¼ https://mudan.me/op00
{
    "map": [
        {
            "id": "op00",
            "target": {
                "path": "/post/opera/essay_00.html",
                "title": "title_00"
            }
        },
        {
            "id": "op01",
            "target": {
                "path": "/post/opera/essay_01.html",
                "title": "title_01"
            }
        },
        {
            "id": "og00",
            "target": {
                "path": "/post/original/essay_00.html",
                "title": "title_00"
            }
        },
        {
            "id": "og01",
            "target": {
                "path": "/post/original/essay_01.html",
                "title": "title_01"
            }
        },
        {
            "id": "rp00",
            "target": {
                "path": "/post/repost/essay_00.html",
                "title": "title_00"
            }
        }
    ]
}
```

## è·³è½¬

`GitHub Pages`é™æ€åšå®¢å¹¶ä¸èƒ½åƒè‡ªå»º`Nginx`æœåŠ¡å™¨é‚£æ ·å¯ä»¥å¤„ç†æ¯ä¸€ä¸ªè¯·æ±‚å¹¶çµæ´»è¿”å›è¦å±•ç¤ºçš„ç½‘é¡µï¼Œæ‰€è°“â€œé™æ€â€æ˜¯æŒ‡æ¯ä¸ªç½‘é¡µéƒ½æ˜¯å·²ç»å­˜åœ¨çš„`HTML`æ–‡ä»¶ï¼Œä¸èƒ½åŠ¨æ€ç”Ÿæˆã€‚`Pages`åªä¼šè¿”å›è¯·æ±‚`URL`çš„å¯¹åº”é¡µé¢ï¼Œä½†å…è®¸ç”¨æˆ·[åˆ›å»ºåŸŸåä¸‹URLä¸å­˜åœ¨æ—¶çš„404é¡µé¢](https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-custom-404-page-for-your-github-pages-site){: target="_blank" }ï¼Œå®ƒæœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ª`HTML`æ–‡ä»¶ï¼Œæ˜¯å®ç°çŸ­é“¾è·³è½¬çš„å…³é”®ã€‚

å¯¹äºçŸ­é“¾[https://mudan.me/op00](https://mudan.me/op00){: target="_blank" }ï¼Œå®ƒå¯¹åº”çš„`HTML`æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‰€ä»¥`Pages`ä¼šé‡å®šå‘åˆ°è‡ªå®šä¹‰çš„`404`é¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢é‡Œå°±å¯ä»¥é€šè¿‡`JavaScript`è·å–`URL`ä¸­çš„çŸ­é“¾`ID`ï¼Œéšåä¸‹è½½å«æœ‰æ˜ å°„è¡¨çš„`JSON`æ–‡ä»¶ï¼Œä»ä¸­æŸ¥æ‰¾åŸé“¾è·³è½¬ã€‚è¿™å°±æ˜¯é™æ€åšå®¢å®ç°çŸ­é“¾çš„æœºåˆ¶ï¼Œæ²¡é‚£ä¹ˆå¤æ‚ï¼Œä¹Ÿä¸éœ€è¦é¢å¤–èŠ±è´¹ã€‚

é€‚å½“æ·»åŠ ä¸€äº›å¥½çœ‹çš„è·³è½¬åŠ¨ç”»ï¼Œä¸€åˆ‡éƒ½ç”±å¼€å‘è€…éšæ„æ§åˆ¶ã€‚

![](https://apqx.oss-cn-hangzhou.aliyuncs.com/blog/original/20220517/short_link_jumping_phone.webp){: loading="lazy" class="clickable clickShowOriginalImg" alt="short link jumping" }