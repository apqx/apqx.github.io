---
layout: post
type: essy
title:  "在Ubuntu 18.04 中配置JDK环境"
author: APQX
date:   2018-04-20 18:41:38 +0800
categories: essy
headpic: /assets/ubuntu.jpg
---

# 在Ubuntu 18.04 中配置JDK环境

## APQX

## 2018年4月20日

我经常会产生一些有意思的想法，对很多事情感到好奇，习惯了图形化交互高度成熟的Windows 10，突发奇想的要尝试一下传说中“纯手工”操作的Linux，正好手头刚组了人生的第一个台式机，Ubuntu自然就成了首选操作系统。

作为一个10年的Windows用户，翻遍了Ubuntu的`Settings`，也没有发现和`Environment Variables`相关的东西，设置界面相比于Windows的控制面板，只能用“简陋”来形容，更不要说`文件管理器`了。在这一刻，我也突然明白了，为什么Windows能占领民用桌面操作系统，果然又是“同行的衬托”，相比Linux的高冷，Windows对几乎所有的操作都提供了图形化接口，动动鼠标就能完成的事，对于普通人，谁会想再去面对那个“恐怖”的Terminal呢。

看了几篇文章，在Ubuntu中配置环境变量无非两种方式，直接修改环境变量配置文件`/etc/environment`，或者使用`export`命令将新的环境变量插入到系统设置中。

### 安装JDK

在Oracle网站下载[JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk10-downloads-4416644.html)文件

解压JDK到/usr/lib中

```
// 实际目录和文件名可能不同
sudo tar -xf /home/apqx/Downloads/jdk-10.0.1_linux-x64_bin.tar.gz /usr/lib
```

### 配置环境变量：直接修改environment文件

Ubuntu的环境变量配置文件是`/etc/environment`,可以直接将JDK目录写到这个文件中，对所有用户生效

打开文件

```
sudo vim /etc/environment
```

里面的内容应该是类似这样的

```
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games"
```

将JDK目录添加到`PATH`中

```
JAVA_HOME="/usr/lib/jdk-10.0.1/"
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/jdk-10.0.1/bin"
```

要注意的是，`/etc/environment`中不能使用`$`来引用已有环境变量，也不能使用`export`命令，即必须填写绝对路径，就像上面那样

加载修改后的文件，使在当前Terminal立即生效，全局生效则需要重新登陆

```
source /etc/environment
```

检查是否配置成功

```
echo $JAVA_HOME
echo $PATH
```

### 配置环境变量：使用export命令

在`Terminal`中输入

```
export JAVA_HOME=/usr/lib/jdk-10.0.1
export PATH=$PATH:$JAVA_HOME/bin
```

即定义了一个`JAVA_HOME`环境变量，并将其路径添加到了系统环境变量`PATH`的后面，此时执行

```
echo $PATH
```

就可以看到，已经添加成功了。但是这种方式设置的环境变量只对当前Terminal及其衍生Terminal有效，解决方法就是在用户登陆时自动在根Terminal中执行`export`命令，这样在用户登陆后，就是全局生效的。

在Linux中有一个特殊的目录`/etc/profile.d/`，此目录下的脚本文件都会在`用户登录`时自动被执行，当然Linux的`开机`并不等于`用户登陆`，所以这种方式和`开机自启`还是有一些区别的，单对于设置环境变量来说足够了。

在/etc/profile.d目录下创建用于设置环境变量的脚本文件environment.sh

```
sudo vim /etc/profile.d/environment.sh
```

在创建的脚本文件中设置Java环境变量

```
#!/bin/sh
export JAVA_HOME=/usr/lib/jdk-10.0.1
export PATH=$PATH:$JAVA_HOME/bin
```

执行脚本

```
sh /etc/profile.d/environment.sh
```

检查环境变量是否设置成功

```
java --version
```

如果看到正确输出，说明设置正确，重新登录即可全局生效。