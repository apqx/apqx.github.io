# 立泉の写字板

[![Deploy Jekyll site to Pages](https://github.com/apqx/apqx.github.io/actions/workflows/jekyll.yml/badge.svg)](https://github.com/apqx/apqx.github.io/actions/workflows/jekyll.yml)

[中文](README_CN.md)

A `Material Design` blog project based on [Jekyll](https://jekyllrb.com), built with Google's [Material Components Web](https://github.com/material-components/material-components-web).

This is not a general blog template, but a sharing space tailored to my own preferences. It consists of four sections: essays, reprints, poems, and dramas. It adopts a light red minimalist style, and does not add any redundant elements other than text, color and animation. It can be used as a reference for personal websites of `Material Design`, but it is not recommended to use it directly, as the "template" has not been optimized for universal use.

Home page 👉 [https://mudan.me](https://mudan.me)

![立泉の写字板](https://apqx-host.oss-cn-hangzhou.aliyuncs.com/blog/screenshots/index.webp)

Drama share 👉 [https://mudan.me/opera](https://mudan.me/opera)

![立泉の写字板](https://apqx-host.oss-cn-hangzhou.aliyuncs.com/blog/screenshots/index_opera.webp)

## Markdown

Blog posts are written in `Markdown` format, converted to `HTML` web pages by `Jekyll`, and generated into static sites that can be hosted on [GitHub Pages](https://pages.github.com) or other cloud servers.

![立泉の写字板](https://apqx-host.oss-cn-hangzhou.aliyuncs.com/blog/screenshots/essay.webp)

## Debug

This project is composed of `Webpack` and `Jekyll`. `Webpack` is used to generate the `JavaScript` and `CSS` resources required for the website, while `Jekyll` is used to convert `Markdown` articles into `HTML` web pages, generating a deployable website.

### Webpack

First switch to the internal `Webpack` project directory to `compile` and generate `js` and `css`.

```sh
# Navigate to the internal Webpack project
cd npm
# Install dependencies
npm install
# Compile, generate js and css in npm/dist
npm run build
```

It is well-known that `Github Pages` is a little "limited" in mainland China, so the resources generated by `Webpack` are hosted on `Aliyun OSS` to improve the access speed. The references to them are shown in `_includes/head.html`.

When debugging, local resources are used to respond to changes in the `Webpack` project in real time. You need to set the `debug` parameter in `_includes/configure.html` to `true`. `Jekyll` will detect this parameter to change the resources referenced in `<header></header>.` In addition, after entering `debug` mode, the `Js` log will also be output to the browser's `console`.

```html
<!-- _includes/configure.html -->

<!-- Setting debug to true will use local resources -->
{% assign debug = true %}
```

### Jekyll

Set up [Jekyll](https://jekyllrb.com/docs/installation/macos/) and run a local development server:

```sh
# Install Jekyll by homebrew on macOS
brew install jekyll
# Install Jekyll plugins defined in `config.yml`
bundle install
# Start Jekyll server and automatically open the blog in a browser
# http://localhost:4000
bundle exec jekyll serve -l -o --trace
```

`Jekyll` will generate a static website under the `_site/` directory and `serve` it to local port 4000.

```sh
http://localhost:4000
```

`jekyll serve` generates the site in development mode. Some plugins, such as `jekyll-sitemap`, will not use the domain name configured in `_config.yml`. If you want to generate a site that can be deployed, you need to execute `jekyll build`。

```sh
bundle exec jekyll build --trace
```

## Deploy to GitHub Pages

After debugging, if `Webpack` generates new `js` and `css` files, you need to upload them to `OSS` hosting, and then modify `_includes/configure.html` to close debug mode to use these hosted remote resources.

```html
<!-- _includes/configure.html -->

<!-- Setting debug to false will use cloud-hosted resources -->
{% assign debug = false %}
```

Push the project to your own repository, `GitHub Pages` will automatically execute `jekyll build` operation, generate a static website, and `serve` it under the specified domain name.

```sh
git push
```

Wait for a few seconds or minutes, depending on the execution speed of `Pages`, and the web page will be updated after completion.

![立泉の写字板](https://apqx-host.oss-cn-hangzhou.aliyuncs.com/blog/screenshots/index_phone.webp)

## Copyright

The code of this project is open source under the `GPL` license, but the copyright of the article content is reserved, especially the photographic images in the "Drama" section, which contain the copyrights of the theater troupe, actors, and photographers. They cannot be used for commercial purposes without permission.

## Acknowledgements

Thanks to [JetBrains](https://www.jetbrains.com) for providing the [Open Source Development License](https://www.jetbrains.com/community/opensource/#support). `IntelliJ IDEA` and `CLion` are two of my favorite development tools.

![JetBrains Logo (Main) logo](https://resources.jetbrains.com/storage/products/company/brand/logos/jb_beam.svg)