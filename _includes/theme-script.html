<script>
    // 在Html还没有完全加载时检查当前的Theme设置，判断是否要给<body/>加.dark类，避免切换Tmeme时的闪烁。
    // 对切换Theme的Button图标的修改放在后面执行，不在这里
    function checkTheme() {
        try {
            const THEME_DAY = "0";
            const THEME_NIGHT = "1";
            const KEY_THEME = "theme";

            var savedTheme = localStorage.getItem(KEY_THEME);
            console.log("saved theme = " + savedTheme);
            var bodyE = document.getElementsByTagName(`body`)[0];
            // 默认是没有.dark的，在确定是暗黑模式时加上.dark
            if (savedTheme == THEME_NIGHT) {
                bodyE.classList.add(`dark`);
            }
        } catch (e) {
            console.log("catch e = " + e.message);
        }
    }

    // 应该在body中立即执行Theme切换检查，这样每次页面加载，都会执行一次主题检查
    // 包括修改主题后退回上一个页面的操作，上一个页面会自动更新为新的主题
    checkTheme()
</script>